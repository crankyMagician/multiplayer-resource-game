[gd_scene load_steps=115 format=3]

[ext_resource type="Script" path="res://scripts/world/game_world.gd" id="1"]
[ext_resource type="Script" path="res://scripts/world/season_manager.gd" id="2"]
[ext_resource type="Script" path="res://scripts/world/encounter_manager.gd" id="3"]
[ext_resource type="Script" path="res://scripts/battle/battle_manager.gd" id="4"]
[ext_resource type="Script" path="res://scripts/crafting/crafting_system.gd" id="5"]
[ext_resource type="Script" path="res://scripts/world/farm_manager.gd" id="6"]
[ext_resource type="Script" path="res://scripts/world/tall_grass.gd" id="7"]
[ext_resource type="Script" path="res://scripts/world/farm_plot.gd" id="8"]
[ext_resource type="Script" path="res://scripts/world/trainer_npc.gd" id="9"]
[ext_resource type="PackedScene" path="res://scenes/ui/pvp_challenge_ui.tscn" id="10"]
[ext_resource type="PackedScene" path="res://scenes/ui/trainer_dialogue_ui.tscn" id="11"]
[ext_resource type="Script" path="res://scripts/world/crafting_station.gd" id="12"]
[ext_resource type="Script" path="res://scripts/world/storage_station.gd" id="14"]
[ext_resource type="Script" path="res://scripts/world/recipe_pickup.gd" id="13"]
[ext_resource type="Script" path="res://scripts/world/world_item_manager.gd" id="15"]
[ext_resource type="Script" path="res://scripts/world/restaurant_manager.gd" id="16"]
[ext_resource type="Script" path="res://scripts/world/shop_npc.gd" id="17"]
[ext_resource type="Script" path="res://scripts/world/social_npc.gd" id="18"]
[ext_resource type="Script" path="res://scripts/world/social_manager.gd" id="19"]
[ext_resource type="Script" path="res://scripts/world/location_manager.gd" id="20"]
[ext_resource type="Script" path="res://scripts/world/quest_manager.gd" id="21"]
[ext_resource type="Script" path="res://scripts/world/friend_manager.gd" id="22"]
[ext_resource type="Script" path="res://scripts/world/excursion_manager.gd" id="23"]
[ext_resource type="Script" path="res://scripts/world/day_night_controller.gd" id="24"]
[ext_resource type="PackedScene" path="res://scenes/world/districts/district_town_square.tscn" id="25"]
[ext_resource type="PackedScene" path="res://scenes/world/districts/district_wharf_walk.tscn" id="26"]
[ext_resource type="PackedScene" path="res://scenes/world/districts/district_market_row.tscn" id="27"]
[ext_resource type="PackedScene" path="res://scenes/world/districts/district_harbor_heights.tscn" id="28"]
[ext_resource type="PackedScene" path="res://scenes/world/districts/district_farm_zone.tscn" id="29"]
[ext_resource type="PackedScene" path="res://scenes/world/harvestable_object.tscn" id="31"]
[ext_resource type="Script" path="res://scripts/world/dig_spot.gd" id="32"]
[ext_resource type="Script" path="res://scripts/world/calendar_board.gd" id="33"]
[ext_resource type="Script" path="res://scripts/world/bank_npc.gd" id="34"]
[ext_resource type="PackedScene" path="res://assets/synty/simple_fantasy/models/SF_Env_Tree_01.glb" id="35"]
[ext_resource type="PackedScene" path="res://assets/synty/simple_fantasy/models/SF_Env_Tree_Large_01.glb" id="36"]
[ext_resource type="PackedScene" path="res://assets/synty/simple_fantasy/models/SF_Env_Rock_01.glb" id="37"]
[ext_resource type="PackedScene" path="res://assets/synty/simple_fantasy/models/SF_Env_Rock_02.glb" id="38"]
[ext_resource type="PackedScene" path="res://assets/synty/simple_fantasy/models/SF_Env_Tree_02.glb" id="39"]
[ext_resource type="PackedScene" path="res://assets/synty/simple_fantasy/models/SF_Env_Tree_03.glb" id="40"]

; ============================================================
; TERRAIN TIER MESHES & MATERIALS (Phase 1)
; ============================================================

; --- Ocean plane (y=-0.5, non-collidable) ---
[sub_resource type="BoxMesh" id="ocean_mesh"]
size = Vector3(300, 0.2, 300)

[sub_resource type="StandardMaterial3D" id="ocean_mat"]
albedo_color = Color(0.12, 0.35, 0.46, 0.85)
transparency = 1

; --- Beach/Sand spit (y=1) ---
[sub_resource type="BoxMesh" id="beach_mesh"]
size = Vector3(60, 0.4, 25)

[sub_resource type="StandardMaterial3D" id="beach_mat"]
albedo_color = Color(0.78, 0.72, 0.56, 1)

[sub_resource type="BoxShape3D" id="beach_col"]
size = Vector3(60, 0.4, 25)

; --- Wharf/Dock platform (y=2) ---
[sub_resource type="BoxMesh" id="wharf_mesh"]
size = Vector3(70, 0.5, 35)

[sub_resource type="StandardMaterial3D" id="wharf_mat"]
albedo_color = Color(0.42, 0.6, 0.42, 1)

[sub_resource type="BoxShape3D" id="wharf_col"]
size = Vector3(70, 0.5, 35)

; --- Farm zone (y=3) ---
[sub_resource type="BoxMesh" id="farm_tier_mesh"]
size = Vector3(50, 0.5, 40)

[sub_resource type="StandardMaterial3D" id="farm_tier_mat"]
albedo_color = Color(0.54, 0.72, 0.35, 1)

[sub_resource type="BoxShape3D" id="farm_tier_col"]
size = Vector3(50, 0.5, 40)

; --- Town Square + Market Row (y=4, largest walkable area) ---
[sub_resource type="BoxMesh" id="town_mesh"]
size = Vector3(90, 0.5, 55)

[sub_resource type="StandardMaterial3D" id="town_mat"]
albedo_color = Color(0.35, 0.6, 0.35, 1)

[sub_resource type="BoxShape3D" id="town_col"]
size = Vector3(90, 0.5, 55)

; --- Southern hills (y=5) ---
[sub_resource type="BoxMesh" id="south_hills_mesh"]
size = Vector3(70, 0.5, 40)

[sub_resource type="StandardMaterial3D" id="south_hills_mat"]
albedo_color = Color(0.24, 0.49, 0.24, 1)

[sub_resource type="BoxShape3D" id="south_hills_col"]
size = Vector3(70, 0.5, 40)

; --- Rocky outcrop east (y=6) ---
[sub_resource type="BoxMesh" id="rocky_mesh"]
size = Vector3(30, 8, 60)

[sub_resource type="StandardMaterial3D" id="rocky_mat"]
albedo_color = Color(0.42, 0.41, 0.35, 1)

[sub_resource type="BoxShape3D" id="rocky_col"]
size = Vector3(30, 8, 60)

; --- Harbor Heights (y=7) ---
[sub_resource type="BoxMesh" id="harbor_heights_mesh"]
size = Vector3(50, 0.5, 45)

[sub_resource type="StandardMaterial3D" id="harbor_heights_mat"]
albedo_color = Color(0.23, 0.48, 0.23, 1)

[sub_resource type="BoxShape3D" id="harbor_heights_col"]
size = Vector3(50, 0.5, 45)

; --- Redwood forest (y=8) ---
[sub_resource type="BoxMesh" id="redwood_mesh"]
size = Vector3(60, 0.5, 35)

[sub_resource type="StandardMaterial3D" id="redwood_mat"]
albedo_color = Color(0.16, 0.35, 0.19, 1)

[sub_resource type="BoxShape3D" id="redwood_col"]
size = Vector3(60, 0.5, 35)

; --- Ramp meshes ---
[sub_resource type="BoxMesh" id="ramp_beach_wharf_mesh"]
size = Vector3(8, 0.3, 22)

[sub_resource type="BoxShape3D" id="ramp_beach_wharf_col"]
size = Vector3(8, 0.3, 22)

[sub_resource type="BoxMesh" id="ramp_wharf_town_mesh"]
size = Vector3(8, 0.3, 30)

[sub_resource type="BoxShape3D" id="ramp_wharf_town_col"]
size = Vector3(8, 0.3, 30)

[sub_resource type="BoxMesh" id="ramp_town_harbor_mesh"]
size = Vector3(6, 0.3, 45)

[sub_resource type="BoxShape3D" id="ramp_town_harbor_col"]
size = Vector3(6, 0.3, 45)

[sub_resource type="BoxMesh" id="ramp_town_farm_mesh"]
size = Vector3(8, 0.3, 28)

[sub_resource type="BoxShape3D" id="ramp_town_farm_col"]
size = Vector3(8, 0.3, 28)

[sub_resource type="BoxMesh" id="ramp_harbor_redwood_mesh"]
size = Vector3(6, 0.3, 30)

[sub_resource type="BoxShape3D" id="ramp_harbor_redwood_col"]
size = Vector3(6, 0.3, 30)

[sub_resource type="BoxMesh" id="ramp_harbor_south_mesh"]
size = Vector3(6, 0.3, 32)

[sub_resource type="BoxShape3D" id="ramp_harbor_south_col"]
size = Vector3(6, 0.3, 32)

[sub_resource type="StandardMaterial3D" id="ramp_mat"]
albedo_color = Color(0.5, 0.55, 0.4, 1)

; --- Bay water (lighter) ---
[sub_resource type="BoxMesh" id="bay_mesh"]
size = Vector3(120, 0.15, 80)

[sub_resource type="StandardMaterial3D" id="bay_mat"]
albedo_color = Color(0.18, 0.45, 0.55, 0.7)
transparency = 1

; --- Natural boundary materials ---
[sub_resource type="StandardMaterial3D" id="cliff_mat"]
albedo_color = Color(0.45, 0.35, 0.25, 1)

[sub_resource type="BoxMesh" id="cliff_west_mesh"]
size = Vector3(8, 12, 200)

[sub_resource type="BoxShape3D" id="cliff_west_col"]
size = Vector3(8, 12, 200)

[sub_resource type="BoxMesh" id="cliff_north_mesh"]
size = Vector3(200, 12, 8)

[sub_resource type="BoxShape3D" id="cliff_north_col"]
size = Vector3(200, 12, 8)

[sub_resource type="BoxMesh" id="cliff_south_mesh"]
size = Vector3(200, 12, 8)

[sub_resource type="BoxShape3D" id="cliff_south_col"]
size = Vector3(200, 12, 8)

; --- Functional collision shapes ---
[sub_resource type="BoxShape3D" id="table_interact_shape"]
size = Vector3(3, 2, 2)

[sub_resource type="BoxShape3D" id="storage_interact_shape"]
size = Vector3(3, 2, 2.5)

[sub_resource type="BoxShape3D" id="station_interact_shape"]
size = Vector3(3.5, 2, 2.5)

[sub_resource type="BoxShape3D" id="grass_area_shape"]
size = Vector3(8, 2, 8)

[sub_resource type="SphereShape3D" id="pickup_shape"]
radius = 2.0

; --- Portal archway meshes ---
[sub_resource type="BoxMesh" id="portal_pillar_mesh"]
size = Vector3(0.6, 5, 0.6)

[sub_resource type="BoxMesh" id="portal_lintel_mesh"]
size = Vector3(5, 0.8, 0.6)

[sub_resource type="CylinderMesh" id="portal_disc_mesh"]
top_radius = 2.5
bottom_radius = 2.5
height = 0.1

; --- Portal materials ---
[sub_resource type="StandardMaterial3D" id="portal_mat_default"]
albedo_color = Color(0.42, 0.14, 0.56, 1)
emission_enabled = true
emission = Color(0.6, 0.2, 0.8, 1)
emission_energy_multiplier = 0.4

[sub_resource type="StandardMaterial3D" id="portal_disc_mat_default"]
albedo_color = Color(0.6, 0.2, 0.8, 0.3)
transparency = 1
emission_enabled = true
emission = Color(0.6, 0.2, 0.8, 1)
emission_energy_multiplier = 1.5

[sub_resource type="StandardMaterial3D" id="portal_mat_coastal"]
albedo_color = Color(0.14, 0.42, 0.56, 1)
emission_enabled = true
emission = Color(0.2, 0.6, 0.8, 1)
emission_energy_multiplier = 0.4

[sub_resource type="StandardMaterial3D" id="portal_disc_mat_coastal"]
albedo_color = Color(0.2, 0.6, 0.8, 0.3)
transparency = 1
emission_enabled = true
emission = Color(0.2, 0.6, 0.8, 1)
emission_energy_multiplier = 1.5

[sub_resource type="StandardMaterial3D" id="portal_mat_fungal"]
albedo_color = Color(0.28, 0.14, 0.42, 1)
emission_enabled = true
emission = Color(0.4, 0.2, 0.6, 1)
emission_energy_multiplier = 0.4

[sub_resource type="StandardMaterial3D" id="portal_disc_mat_fungal"]
albedo_color = Color(0.4, 0.2, 0.6, 0.3)
transparency = 1
emission_enabled = true
emission = Color(0.4, 0.2, 0.6, 1)
emission_energy_multiplier = 1.5

[sub_resource type="StandardMaterial3D" id="portal_mat_volcanic"]
albedo_color = Color(0.63, 0.21, 0.07, 1)
emission_enabled = true
emission = Color(0.9, 0.3, 0.1, 1)
emission_energy_multiplier = 0.4

[sub_resource type="StandardMaterial3D" id="portal_disc_mat_volcanic"]
albedo_color = Color(0.9, 0.3, 0.1, 0.3)
transparency = 1
emission_enabled = true
emission = Color(0.9, 0.3, 0.1, 1)
emission_energy_multiplier = 1.5

[sub_resource type="StandardMaterial3D" id="portal_mat_frozen"]
albedo_color = Color(0.35, 0.56, 0.665, 1)
emission_enabled = true
emission = Color(0.5, 0.8, 0.95, 1)
emission_energy_multiplier = 0.4

[sub_resource type="StandardMaterial3D" id="portal_disc_mat_frozen"]
albedo_color = Color(0.5, 0.8, 0.95, 0.3)
transparency = 1
emission_enabled = true
emission = Color(0.5, 0.8, 0.95, 1)
emission_energy_multiplier = 1.5

; --- Calendar board meshes ---
[sub_resource type="BoxMesh" id="calendar_board_mesh"]
size = Vector3(1.2, 1.8, 0.15)

[sub_resource type="StandardMaterial3D" id="calendar_board_mat"]
albedo_color = Color(0.45, 0.3, 0.15, 1)

[sub_resource type="CylinderMesh" id="calendar_post_mesh"]
top_radius = 0.08
bottom_radius = 0.1
height = 2.0

[sub_resource type="StandardMaterial3D" id="calendar_post_mat"]
albedo_color = Color(0.35, 0.2, 0.1, 1)

; --- Fishing spot meshes ---
[sub_resource type="CylinderMesh" id="fishing_disc_mesh"]
top_radius = 3.0
bottom_radius = 3.0
height = 0.1

[sub_resource type="StandardMaterial3D" id="fishing_water_mat"]
albedo_color = Color(0.2, 0.4, 0.7, 0.5)
transparency = 1

; --- Portal interaction shapes (Phase 5: pre-placed) ---
[sub_resource type="CylinderShape3D" id="portal_interact_shape"]
radius = 3.0
height = 4.0

; --- Bank NPC shape (Phase 5: pre-placed) ---
[sub_resource type="CylinderShape3D" id="bank_interact_shape"]
radius = 3.0
height = 3.0

; --- My Restaurant Door resources ---
[sub_resource type="BoxShape3D" id="restaurant_door_box"]
size = Vector3(2.5, 3.5, 2.5)

[sub_resource type="BoxMesh" id="restaurant_door_frame_mesh"]
size = Vector3(2.4, 3.4, 0.15)

[sub_resource type="StandardMaterial3D" id="restaurant_door_frame_mat"]
albedo_color = Color(0.9, 0.75, 0.2, 1)
emission_enabled = true
emission = Color(1, 0.85, 0.3, 1)
emission_energy_multiplier = 0.5

[sub_resource type="BoxMesh" id="restaurant_door_main_mesh"]
size = Vector3(2, 3, 0.4)

[sub_resource type="StandardMaterial3D" id="restaurant_door_main_mat"]
albedo_color = Color(0.65, 0.12, 0.08, 1)
emission_enabled = true
emission = Color(0.7, 0.15, 0.1, 1)
emission_energy_multiplier = 0.3

[sub_resource type="BoxMesh" id="restaurant_door_ground_mesh"]
size = Vector3(2.5, 0.06, 2)

[sub_resource type="StandardMaterial3D" id="restaurant_door_ground_mat"]
albedo_color = Color(1, 0.85, 0.2, 1)
emission_enabled = true
emission = Color(1, 0.8, 0.1, 1)
emission_energy_multiplier = 0.6

[sub_resource type="BoxMesh" id="restaurant_door_indicator_mesh"]
size = Vector3(0.4, 0.4, 0.4)

[sub_resource type="StandardMaterial3D" id="restaurant_door_indicator_mat"]
albedo_color = Color(1, 0.9, 0.1, 1)
emission_enabled = true
emission = Color(1, 0.95, 0.3, 1)
emission_energy_multiplier = 2.0

; ============================================================
; SCENE TREE
; ============================================================

[node name="GameWorld" type="Node3D"]
script = ExtResource("1")

[node name="SeasonManager" type="Node" parent="."]
script = ExtResource("2")

[node name="EncounterManager" type="Node" parent="."]
script = ExtResource("3")

[node name="BattleManager" type="Node" parent="."]
script = ExtResource("4")

[node name="CraftingSystem" type="Node" parent="."]
script = ExtResource("5")

; ==================== ENVIRONMENT ====================
[node name="Environment" type="Node3D" parent="."]

[node name="DirectionalLight3D" type="DirectionalLight3D" parent="Environment"]
transform = Transform3D(0.866, -0.354, 0.354, 0, 0.707, 0.707, -0.5, -0.612, 0.612, 0, 15, 10)
shadow_enabled = true

; ==================== TERRAIN TIERS ====================
[node name="Terrain" type="Node3D" parent="Environment"]

; --- Ocean plane (y=-0.5, non-collidable visual only) ---
[node name="OceanPlane" type="MeshInstance3D" parent="Environment/Terrain"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -60, -0.5, -30)
mesh = SubResource("ocean_mesh")
material_override = SubResource("ocean_mat")

; --- Bay water (lighter, overlapping ocean in bay area) ---
[node name="BayWater" type="MeshInstance3D" parent="Environment/Terrain"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -70, -0.3, -35)
mesh = SubResource("bay_mesh")
material_override = SubResource("bay_mat")

; --- Beach/Sand spit (y=1) ---
[node name="Beach" type="StaticBody3D" parent="Environment/Terrain"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -80, 0.8, -35)

[node name="Mesh" type="MeshInstance3D" parent="Environment/Terrain/Beach"]
mesh = SubResource("beach_mesh")
material_override = SubResource("beach_mat")

[node name="Col" type="CollisionShape3D" parent="Environment/Terrain/Beach"]
shape = SubResource("beach_col")

; --- Wharf/Dock platform (y=2) ---
[node name="Wharf" type="StaticBody3D" parent="Environment/Terrain"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -60, 1.75, -25)

[node name="Mesh" type="MeshInstance3D" parent="Environment/Terrain/Wharf"]
mesh = SubResource("wharf_mesh")
material_override = SubResource("wharf_mat")

[node name="Col" type="CollisionShape3D" parent="Environment/Terrain/Wharf"]
shape = SubResource("wharf_col")

; --- Farm zone (y=3) ---
[node name="FarmTier" type="StaticBody3D" parent="Environment/Terrain"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -10, 2.75, 20)

[node name="Mesh" type="MeshInstance3D" parent="Environment/Terrain/FarmTier"]
mesh = SubResource("farm_tier_mesh")
material_override = SubResource("farm_tier_mat")

[node name="Col" type="CollisionShape3D" parent="Environment/Terrain/FarmTier"]
shape = SubResource("farm_tier_col")

; --- Town Square + Market Row (y=4, largest tier) ---
[node name="TownPlatform" type="StaticBody3D" parent="Environment/Terrain"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -35, 3.75, 0)

[node name="Mesh" type="MeshInstance3D" parent="Environment/Terrain/TownPlatform"]
mesh = SubResource("town_mesh")
material_override = SubResource("town_mat")

[node name="Col" type="CollisionShape3D" parent="Environment/Terrain/TownPlatform"]
shape = SubResource("town_col")

; --- Southern hills (y=5) ---
[node name="SouthernHills" type="StaticBody3D" parent="Environment/Terrain"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -20, 4.75, -25)

[node name="Mesh" type="MeshInstance3D" parent="Environment/Terrain/SouthernHills"]
mesh = SubResource("south_hills_mesh")
material_override = SubResource("south_hills_mat")

[node name="Col" type="CollisionShape3D" parent="Environment/Terrain/SouthernHills"]
shape = SubResource("south_hills_col")

; --- Rocky outcrop east (y=6, impassable wall) ---
[node name="RockyOutcrop" type="StaticBody3D" parent="Environment/Terrain"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 65, 2, 0)

[node name="Mesh" type="MeshInstance3D" parent="Environment/Terrain/RockyOutcrop"]
mesh = SubResource("rocky_mesh")
material_override = SubResource("rocky_mat")

[node name="Col" type="CollisionShape3D" parent="Environment/Terrain/RockyOutcrop"]
shape = SubResource("rocky_col")

; --- Harbor Heights (y=7) ---
[node name="HarborHeightsTier" type="StaticBody3D" parent="Environment/Terrain"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 30, 6.75, 50)

[node name="Mesh" type="MeshInstance3D" parent="Environment/Terrain/HarborHeightsTier"]
mesh = SubResource("harbor_heights_mesh")
material_override = SubResource("harbor_heights_mat")

[node name="Col" type="CollisionShape3D" parent="Environment/Terrain/HarborHeightsTier"]
shape = SubResource("harbor_heights_col")

; --- Redwood forest (y=8) ---
[node name="RedwoodForest" type="StaticBody3D" parent="Environment/Terrain"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 30, 7.75, 90)

[node name="Mesh" type="MeshInstance3D" parent="Environment/Terrain/RedwoodForest"]
mesh = SubResource("redwood_mesh")
material_override = SubResource("redwood_mat")

[node name="Col" type="CollisionShape3D" parent="Environment/Terrain/RedwoodForest"]
shape = SubResource("redwood_col")

; ==================== RAMPS ====================
[node name="Ramps" type="Node3D" parent="Environment"]

; Beach→Wharf (1→2m, L=22m) — angle ≈ atan(1/22) ≈ 2.6deg
[node name="RampBeachWharf" type="StaticBody3D" parent="Environment/Ramps"]
transform = Transform3D(1, 0, 0, 0, 0.998, 0.045, 0, -0.045, 0.998, -70, 1.3, -30)

[node name="Mesh" type="MeshInstance3D" parent="Environment/Ramps/RampBeachWharf"]
mesh = SubResource("ramp_beach_wharf_mesh")
material_override = SubResource("ramp_mat")

[node name="Col" type="CollisionShape3D" parent="Environment/Ramps/RampBeachWharf"]
shape = SubResource("ramp_beach_wharf_col")

; Wharf→Town (2→4m, L=30m) — angle ≈ atan(2/30) ≈ 3.8deg
[node name="RampWharfTown" type="StaticBody3D" parent="Environment/Ramps"]
transform = Transform3D(1, 0, 0, 0, 0.998, 0.067, 0, -0.067, 0.998, -45, 2.9, -10)

[node name="Mesh" type="MeshInstance3D" parent="Environment/Ramps/RampWharfTown"]
mesh = SubResource("ramp_wharf_town_mesh")
material_override = SubResource("ramp_mat")

[node name="Col" type="CollisionShape3D" parent="Environment/Ramps/RampWharfTown"]
shape = SubResource("ramp_wharf_town_col")

; Town→Harbor Heights (4→7m, L=45m, winding switchback) — angle ≈ atan(3/45) ≈ 3.8deg
[node name="RampTownHarbor" type="StaticBody3D" parent="Environment/Ramps"]
transform = Transform3D(1, 0, 0, 0, 0.998, -0.067, 0, 0.067, 0.998, 5, 5.5, 30)

[node name="Mesh" type="MeshInstance3D" parent="Environment/Ramps/RampTownHarbor"]
mesh = SubResource("ramp_town_harbor_mesh")
material_override = SubResource("ramp_mat")

[node name="Col" type="CollisionShape3D" parent="Environment/Ramps/RampTownHarbor"]
shape = SubResource("ramp_town_harbor_col")

; Town→Farm (4→3m, L=28m) — angle ≈ atan(1/28) ≈ 2deg, downhill
[node name="RampTownFarm" type="StaticBody3D" parent="Environment/Ramps"]
transform = Transform3D(1, 0, 0, 0, 0.999, -0.036, 0, 0.036, 0.999, -20, 3.5, 12)

[node name="Mesh" type="MeshInstance3D" parent="Environment/Ramps/RampTownFarm"]
mesh = SubResource("ramp_town_farm_mesh")
material_override = SubResource("ramp_mat")

[node name="Col" type="CollisionShape3D" parent="Environment/Ramps/RampTownFarm"]
shape = SubResource("ramp_town_farm_col")

; Harbor Heights→Redwoods (7→8m, L=30m) — angle ≈ atan(1/30) ≈ 1.9deg
[node name="RampHarborRedwood" type="StaticBody3D" parent="Environment/Ramps"]
transform = Transform3D(1, 0, 0, 0, 0.999, -0.033, 0, 0.033, 0.999, 30, 7.5, 75)

[node name="Mesh" type="MeshInstance3D" parent="Environment/Ramps/RampHarborRedwood"]
mesh = SubResource("ramp_harbor_redwood_mesh")
material_override = SubResource("ramp_mat")

[node name="Col" type="CollisionShape3D" parent="Environment/Ramps/RampHarborRedwood"]
shape = SubResource("ramp_harbor_redwood_col")

; Harbor Heights→Southern Hills (7→5m, L=32m) — angle ≈ atan(2/32) ≈ 3.6deg, downhill
[node name="RampHarborSouth" type="StaticBody3D" parent="Environment/Ramps"]
transform = Transform3D(1, 0, 0, 0, 0.998, 0.063, 0, -0.063, 0.998, 10, 6.0, 20)

[node name="Mesh" type="MeshInstance3D" parent="Environment/Ramps/RampHarborSouth"]
mesh = SubResource("ramp_harbor_south_mesh")
material_override = SubResource("ramp_mat")

[node name="Col" type="CollisionShape3D" parent="Environment/Ramps/RampHarborSouth"]
shape = SubResource("ramp_harbor_south_col")

; ==================== NATURAL BOUNDARIES (Phase 2) ====================
[node name="Boundaries" type="Node3D" parent="Environment"]

; West cliff wall (ocean side)
[node name="CliffWest" type="StaticBody3D" parent="Environment/Boundaries"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -125, 2, 0)

[node name="Mesh" type="MeshInstance3D" parent="Environment/Boundaries/CliffWest"]
mesh = SubResource("cliff_west_mesh")
material_override = SubResource("cliff_mat")

[node name="Col" type="CollisionShape3D" parent="Environment/Boundaries/CliffWest"]
shape = SubResource("cliff_west_col")

; North shoreline wall (bay)
[node name="CliffNorth" type="StaticBody3D" parent="Environment/Boundaries"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 2, 115)

[node name="Mesh" type="MeshInstance3D" parent="Environment/Boundaries/CliffNorth"]
mesh = SubResource("cliff_north_mesh")
material_override = SubResource("cliff_mat")

[node name="Col" type="CollisionShape3D" parent="Environment/Boundaries/CliffNorth"]
shape = SubResource("cliff_north_col")

; South dense forest wall
[node name="ForestSouth" type="StaticBody3D" parent="Environment/Boundaries"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 2, -60)

[node name="Mesh" type="MeshInstance3D" parent="Environment/Boundaries/ForestSouth"]
mesh = SubResource("cliff_south_mesh")
material_override = SubResource("south_hills_mat")

[node name="Col" type="CollisionShape3D" parent="Environment/Boundaries/ForestSouth"]
shape = SubResource("cliff_south_col")

; East boundary is Rocky Outcrop (already placed in Terrain)

; ==================== PLAYERS ====================
[node name="Players" type="Node3D" parent="."]

[node name="MultiplayerSpawner" type="MultiplayerSpawner" parent="Players"]
_spawnable_scenes = PackedStringArray("res://scenes/player/player.tscn")
spawn_path = NodePath("..")

; ==================== ZONES ====================
[node name="Zones" type="Node3D" parent="."]

; === RESTAURANT ZONE (near spawn in Town Square area) ===
[node name="RestaurantZone" type="Node3D" parent="Zones"]

; Kitchen (near Salty Ladle, Harbor Heights)
[node name="CraftingTable" type="StaticBody3D" parent="Zones/RestaurantZone"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 38, 7, 57)

[node name="InteractArea" type="Area3D" parent="Zones/RestaurantZone/CraftingTable"]
script = ExtResource("12")
station_type = "kitchen"

[node name="InteractShape" type="CollisionShape3D" parent="Zones/RestaurantZone/CraftingTable/InteractArea"]
shape = SubResource("table_interact_shape")

[node name="StationLabel" type="Label3D" parent="Zones/RestaurantZone/CraftingTable"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1.8, 0)
text = "Kitchen"
font_size = 48
outline_size = 8
modulate = Color(1, 0.8, 0.3, 1)

; Pantry (creature storage, near restaurant)
[node name="Pantry" type="StaticBody3D" parent="Zones/RestaurantZone"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 36, 7, 56)

[node name="InteractArea" type="Area3D" parent="Zones/RestaurantZone/Pantry"]
script = ExtResource("14")

[node name="InteractShape" type="CollisionShape3D" parent="Zones/RestaurantZone/Pantry/InteractArea"]
shape = SubResource("storage_interact_shape")

[node name="StationLabel" type="Label3D" parent="Zones/RestaurantZone/Pantry"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1.8, 0)
text = "Pantry"
font_size = 48
outline_size = 8
modulate = Color(0.5, 0.7, 0.9, 1)

; Spawn point (Town Square)
[node name="SpawnPoint" type="Marker3D" parent="Zones/RestaurantZone"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -32.5, 4, 13.75)

; Workbench (near spawn)
[node name="Workbench" type="StaticBody3D" parent="Zones/RestaurantZone"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -30, 4, 14)

[node name="InteractArea" type="Area3D" parent="Zones/RestaurantZone/Workbench"]
script = ExtResource("12")
station_type = "workbench"

[node name="InteractShape" type="CollisionShape3D" parent="Zones/RestaurantZone/Workbench/InteractArea"]
shape = SubResource("station_interact_shape")

[node name="StationLabel" type="Label3D" parent="Zones/RestaurantZone/Workbench"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1.8, 0)
text = "Workbench"
font_size = 48
outline_size = 8
modulate = Color(0.8, 0.5, 0.2, 1)

; === FARM ZONE ===
[node name="FarmZone" type="Node3D" parent="Zones"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -12.5, 3, 16.25)

[node name="FarmManager" type="Node3D" parent="Zones/FarmZone"]
script = ExtResource("6")

[node name="WaterSource" type="StaticBody3D" parent="Zones/FarmZone"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 6, 0.4, 6)

[node name="WaterArea" type="Area3D" parent="Zones/FarmZone/WaterSource" groups=["water_source"]]

[node name="WaterShape" type="CollisionShape3D" parent="Zones/FarmZone/WaterSource/WaterArea"]
shape = SubResource("table_interact_shape")

; === WILD ZONE (encounter zones scattered across map) ===
[node name="WildZone" type="Node3D" parent="Zones"]

; Encounter zones at new SVG biome positions
[node name="HerbGarden" type="Area3D" parent="Zones/WildZone"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -15, 4, -8)
script = ExtResource("7")
encounter_table_id = "herb_garden"
grass_color = Color(0.2, 0.6, 0.2, 0.7)

[node name="GrassShape" type="CollisionShape3D" parent="Zones/WildZone/HerbGarden"]
shape = SubResource("grass_area_shape")

[node name="FlameKitchen" type="Area3D" parent="Zones/WildZone"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -50, 2, -20)
script = ExtResource("7")
encounter_table_id = "flame_kitchen"
grass_color = Color(0.6, 0.3, 0.2, 0.7)

[node name="GrassShape" type="CollisionShape3D" parent="Zones/WildZone/FlameKitchen"]
shape = SubResource("grass_area_shape")

[node name="FrostPantry" type="Area3D" parent="Zones/WildZone"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -35, 5, -30)
script = ExtResource("7")
encounter_table_id = "frost_pantry"
grass_color = Color(0.3, 0.4, 0.7, 0.7)

[node name="GrassShape" type="CollisionShape3D" parent="Zones/WildZone/FrostPantry"]
shape = SubResource("grass_area_shape")

[node name="HarvestField" type="Area3D" parent="Zones/WildZone"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -5, 3, 25)
script = ExtResource("7")
encounter_table_id = "harvest_field"
grass_color = Color(0.6, 0.55, 0.2, 0.7)

[node name="GrassShape" type="CollisionShape3D" parent="Zones/WildZone/HarvestField"]
shape = SubResource("grass_area_shape")

[node name="SourSprings" type="Area3D" parent="Zones/WildZone"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 45, 7, 40)
script = ExtResource("7")
encounter_table_id = "sour_springs"
grass_color = Color(0.7, 0.8, 0.2, 0.7)

[node name="GrassShape" type="CollisionShape3D" parent="Zones/WildZone/SourSprings"]
shape = SubResource("grass_area_shape")

[node name="FusionKitchen" type="Area3D" parent="Zones/WildZone"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -25, 5, -35)
script = ExtResource("7")
encounter_table_id = "fusion_kitchen"
grass_color = Color(0.6, 0.3, 0.6, 0.7)

[node name="GrassShape" type="CollisionShape3D" parent="Zones/WildZone/FusionKitchen"]
shape = SubResource("grass_area_shape")

[node name="FermentedHollow" type="Area3D" parent="Zones/WildZone"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -70, 2, -15)
script = ExtResource("7")
encounter_table_id = "fermented_hollow"
grass_color = Color(0.4, 0.35, 0.2, 0.7)

[node name="GrassShape" type="CollisionShape3D" parent="Zones/WildZone/FermentedHollow"]
shape = SubResource("grass_area_shape")

[node name="BlackenedCrest" type="Area3D" parent="Zones/WildZone"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 50, 8, 30)
script = ExtResource("7")
encounter_table_id = "blackened_crest"
grass_color = Color(0.5, 0.2, 0.15, 0.7)

[node name="GrassShape" type="CollisionShape3D" parent="Zones/WildZone/BlackenedCrest"]
shape = SubResource("grass_area_shape")

[node name="BatteredBay" type="Area3D" parent="Zones/WildZone"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -90, 1, -30)
script = ExtResource("7")
encounter_table_id = "battered_bay"
grass_color = Color(0.3, 0.5, 0.7, 0.7)

[node name="GrassShape" type="CollisionShape3D" parent="Zones/WildZone/BatteredBay"]
shape = SubResource("grass_area_shape")

[node name="SaltedShipwreck" type="Area3D" parent="Zones/WildZone"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -80, 1, -40)
script = ExtResource("7")
encounter_table_id = "salted_shipwreck"
grass_color = Color(0.5, 0.55, 0.45, 0.7)

[node name="GrassShape" type="CollisionShape3D" parent="Zones/WildZone/SaltedShipwreck"]
shape = SubResource("grass_area_shape")

; === CAULDRON (wilderness area) ===
[node name="Cauldron" type="StaticBody3D" parent="Zones/WildZone"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -15, 5, -20)

[node name="InteractArea" type="Area3D" parent="Zones/WildZone/Cauldron"]
script = ExtResource("12")
station_type = "cauldron"

[node name="InteractShape" type="CollisionShape3D" parent="Zones/WildZone/Cauldron/InteractArea"]
shape = SubResource("station_interact_shape")

[node name="StationLabel" type="Label3D" parent="Zones/WildZone/Cauldron"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1.8, 0)
text = "Cauldron"
font_size = 48
outline_size = 8
modulate = Color(0.6, 0.3, 0.8, 1)

; === RECIPE PICKUPS (near associated encounter zones) ===
[node name="RecipePickups" type="Node3D" parent="Zones/WildZone"]

[node name="PickupHerbGarden" type="Area3D" parent="Zones/WildZone/RecipePickups"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -18, 4, -10)
script = ExtResource("13")
scroll_id = "scroll_basil_sprite"
pickup_id = "pickup_herb_garden_1"

[node name="PickupShape" type="CollisionShape3D" parent="Zones/WildZone/RecipePickups/PickupHerbGarden"]
shape = SubResource("pickup_shape")

[node name="PickupFrostPantry" type="Area3D" parent="Zones/WildZone/RecipePickups"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -38, 5, -32)
script = ExtResource("13")
scroll_id = "scroll_frost_berry"
pickup_id = "pickup_frost_pantry_1"

[node name="PickupShape" type="CollisionShape3D" parent="Zones/WildZone/RecipePickups/PickupFrostPantry"]
shape = SubResource("pickup_shape")

[node name="PickupSourSprings" type="Area3D" parent="Zones/WildZone/RecipePickups"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 48, 7, 42)
script = ExtResource("13")
scroll_id = "scroll_lemon_imp"
pickup_id = "pickup_sour_springs_1"

[node name="PickupShape" type="CollisionShape3D" parent="Zones/WildZone/RecipePickups/PickupSourSprings"]
shape = SubResource("pickup_shape")

[node name="PickupFusionKitchen" type="Area3D" parent="Zones/WildZone/RecipePickups"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -28, 5, -37)
script = ExtResource("13")
scroll_id = "scroll_pickle_toad"
pickup_id = "pickup_fusion_kitchen_1"

[node name="PickupShape" type="CollisionShape3D" parent="Zones/WildZone/RecipePickups/PickupFusionKitchen"]
shape = SubResource("pickup_shape")

; === HARVESTABLES (redistributed across new terrain) ===
[node name="Harvestables" type="Node3D" parent="Zones/WildZone"]

; Trees near forests
[node name="Tree_1" parent="Zones/WildZone/Harvestables" instance=ExtResource("31")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -20, 5, -15)
harvestable_type = "tree"
required_tool = "axe"
max_health = 3
respawn_time = 120.0
drops = [{"item_id": "wood", "min": 1, "max": 3, "weight": 1.0}, {"item_id": "herb_basil", "min": 1, "max": 1, "weight": 0.2}]

[node name="Tree_2" parent="Zones/WildZone/Harvestables" instance=ExtResource("31")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -30, 5, -25)
harvestable_type = "tree"
required_tool = "axe"
max_health = 3
respawn_time = 120.0
drops = [{"item_id": "wood", "min": 1, "max": 3, "weight": 1.0}, {"item_id": "herb_basil", "min": 1, "max": 1, "weight": 0.2}]

[node name="Tree_3" parent="Zones/WildZone/Harvestables" instance=ExtResource("31")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 40, 7, 60)
harvestable_type = "tree"
required_tool = "axe"
max_health = 3
respawn_time = 120.0
drops = [{"item_id": "wood", "min": 1, "max": 3, "weight": 1.0}, {"item_id": "herb_basil", "min": 1, "max": 1, "weight": 0.2}]

[node name="Tree_4" parent="Zones/WildZone/Harvestables" instance=ExtResource("31")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 25, 8, 80)
harvestable_type = "tree"
required_tool = "axe"
max_health = 3
respawn_time = 120.0
drops = [{"item_id": "wood", "min": 1, "max": 3, "weight": 1.0}, {"item_id": "herb_basil", "min": 1, "max": 1, "weight": 0.2}]

[node name="Tree_5" parent="Zones/WildZone/Harvestables" instance=ExtResource("31")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -10, 4, -5)
harvestable_type = "tree"
required_tool = "axe"
max_health = 3
respawn_time = 120.0
drops = [{"item_id": "wood", "min": 1, "max": 3, "weight": 1.0}, {"item_id": "herb_basil", "min": 1, "max": 1, "weight": 0.2}]

[node name="Tree_6" parent="Zones/WildZone/Harvestables" instance=ExtResource("31")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 35, 8, 85)
harvestable_type = "tree"
required_tool = "axe"
max_health = 3
respawn_time = 120.0
drops = [{"item_id": "wood", "min": 1, "max": 3, "weight": 1.0}, {"item_id": "herb_basil", "min": 1, "max": 1, "weight": 0.2}]

; Rocks near cliffs/volcanic
[node name="Rock_1" parent="Zones/WildZone/Harvestables" instance=ExtResource("31")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 50, 8, 25)
harvestable_type = "rock"
required_tool = "axe"
max_health = 4
respawn_time = 150.0
drops = [{"item_id": "stone", "min": 1, "max": 2, "weight": 1.0}, {"item_id": "chili_powder", "min": 1, "max": 1, "weight": 0.1}]

[node name="Rock_2" parent="Zones/WildZone/Harvestables" instance=ExtResource("31")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 55, 7, 35)
harvestable_type = "rock"
required_tool = "axe"
max_health = 4
respawn_time = 150.0
drops = [{"item_id": "stone", "min": 1, "max": 2, "weight": 1.0}, {"item_id": "chili_powder", "min": 1, "max": 1, "weight": 0.1}]

[node name="Rock_3" parent="Zones/WildZone/Harvestables" instance=ExtResource("31")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -25, 5, -28)
harvestable_type = "rock"
required_tool = "axe"
max_health = 4
respawn_time = 150.0
drops = [{"item_id": "stone", "min": 1, "max": 2, "weight": 1.0}, {"item_id": "chili_powder", "min": 1, "max": 1, "weight": 0.1}]

[node name="Rock_4" parent="Zones/WildZone/Harvestables" instance=ExtResource("31")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 45, 7, 55)
harvestable_type = "rock"
required_tool = "axe"
max_health = 4
respawn_time = 150.0
drops = [{"item_id": "stone", "min": 1, "max": 2, "weight": 1.0}, {"item_id": "chili_powder", "min": 1, "max": 1, "weight": 0.1}]

; Bushes near meadows
[node name="Bush_1" parent="Zones/WildZone/Harvestables" instance=ExtResource("31")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -8, 3, 20)
harvestable_type = "bush"
required_tool = ""
max_health = 1
respawn_time = 90.0
drops = [{"item_id": "berry", "min": 1, "max": 2, "weight": 1.0}]

[node name="Bush_2" parent="Zones/WildZone/Harvestables" instance=ExtResource("31")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -18, 4, -3)
harvestable_type = "bush"
required_tool = ""
max_health = 1
respawn_time = 90.0
drops = [{"item_id": "berry", "min": 1, "max": 2, "weight": 1.0}]

[node name="Bush_3" parent="Zones/WildZone/Harvestables" instance=ExtResource("31")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 30, 7, 45)
harvestable_type = "bush"
required_tool = ""
max_health = 1
respawn_time = 90.0
drops = [{"item_id": "berry", "min": 1, "max": 2, "weight": 1.0}]

[node name="Bush_4" parent="Zones/WildZone/Harvestables" instance=ExtResource("31")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -60, 2, -18)
harvestable_type = "bush"
required_tool = ""
max_health = 1
respawn_time = 90.0
drops = [{"item_id": "berry", "min": 1, "max": 2, "weight": 1.0}]

; === DIG SPOTS (redistributed) ===
[node name="DigSpots" type="Node3D" parent="Zones/WildZone"]

[node name="DigSpot_herb_1" type="Area3D" parent="Zones/WildZone/DigSpots"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -17, 4, -7)
script = ExtResource("32")
spot_id = "herb_1"
loot_table = [{"item_id": "broth", "weight": 0.6, "min": 1, "max": 1}, {"item_id": "herb_basil", "weight": 0.4, "min": 1, "max": 2}]

[node name="DigSpot_herb_2" type="Area3D" parent="Zones/WildZone/DigSpots"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -12, 4, -10)
script = ExtResource("32")
spot_id = "herb_2"
loot_table = [{"item_id": "broth", "weight": 0.5, "min": 1, "max": 1}, {"item_id": "herb_basil", "weight": 0.5, "min": 1, "max": 2}]

[node name="DigSpot_flame_1" type="Area3D" parent="Zones/WildZone/DigSpots"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -52, 2, -18)
script = ExtResource("32")
spot_id = "flame_1"
loot_table = [{"item_id": "chili_powder", "weight": 0.5, "min": 1, "max": 1}, {"item_id": "chili_pepper", "weight": 0.5, "min": 1, "max": 2}]

[node name="DigSpot_flame_2" type="Area3D" parent="Zones/WildZone/DigSpots"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -48, 2, -22)
script = ExtResource("32")
spot_id = "flame_2"
loot_table = [{"item_id": "chili_powder", "weight": 0.6, "min": 1, "max": 1}, {"item_id": "chili_pepper", "weight": 0.4, "min": 1, "max": 1}]

[node name="DigSpot_frost_1" type="Area3D" parent="Zones/WildZone/DigSpots"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -37, 5, -28)
script = ExtResource("32")
spot_id = "frost_1"
loot_table = [{"item_id": "mint", "weight": 0.6, "min": 1, "max": 2}]

[node name="DigSpot_frost_2" type="Area3D" parent="Zones/WildZone/DigSpots"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -33, 5, -32)
script = ExtResource("32")
spot_id = "frost_2"
loot_table = [{"item_id": "mint", "weight": 0.5, "min": 1, "max": 1}]

[node name="DigSpot_harvest_1" type="Area3D" parent="Zones/WildZone/DigSpots"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -3, 3, 27)
script = ExtResource("32")
spot_id = "harvest_1"
loot_table = [{"item_id": "wheat", "weight": 0.6, "min": 1, "max": 2}, {"item_id": "flour", "weight": 0.3, "min": 1, "max": 1}]

[node name="DigSpot_harvest_2" type="Area3D" parent="Zones/WildZone/DigSpots"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -7, 3, 23)
script = ExtResource("32")
spot_id = "harvest_2"
loot_table = [{"item_id": "wheat", "weight": 0.5, "min": 1, "max": 2}, {"item_id": "flour", "weight": 0.4, "min": 1, "max": 1}]

[node name="DigSpot_sour_1" type="Area3D" parent="Zones/WildZone/DigSpots"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 47, 7, 38)
script = ExtResource("32")
spot_id = "sour_1"
loot_table = [{"item_id": "mushroom", "weight": 0.5, "min": 1, "max": 2}]

[node name="DigSpot_fusion_1" type="Area3D" parent="Zones/WildZone/DigSpots"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -27, 5, -33)
script = ExtResource("32")
spot_id = "fusion_1"
loot_table = [{"item_id": "sugar", "weight": 0.4, "min": 1, "max": 1}, {"item_id": "soy_sauce", "weight": 0.3, "min": 1, "max": 1}]

; === FISHING SPOTS (expanded 3 → 8) ===
[node name="FishingSpots" type="Node3D" parent="Zones"]

[node name="FishingSpot_pond" type="Node3D" parent="Zones/FishingSpots" groups=["fishing_spot"]]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -5, 3, 30)
metadata/fishing_table_id = "pond"

[node name="WaterDisc" type="MeshInstance3D" parent="Zones/FishingSpots/FishingSpot_pond"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.05, 0)
mesh = SubResource("fishing_disc_mesh")
material_override = SubResource("fishing_water_mat")

[node name="SpotLabel" type="Label3D" parent="Zones/FishingSpots/FishingSpot_pond"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 2.5, 0)
text = "Farm Pond - Fishing Spot"
font_size = 28
outline_size = 6
modulate = Color(0.6, 0.75, 0.9, 1)
billboard = 1

[node name="HintLabel" type="Label3D" parent="Zones/FishingSpots/FishingSpot_pond"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 2.0, 0)
text = "Equip Rod + Press E"
font_size = 20
outline_size = 4
modulate = Color(0.8, 0.8, 0.8, 0.8)
billboard = 1

[node name="FishingSpot_river" type="Node3D" parent="Zones/FishingSpots" groups=["fishing_spot"]]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -55, 2, -32)
metadata/fishing_table_id = "river"

[node name="WaterDisc" type="MeshInstance3D" parent="Zones/FishingSpots/FishingSpot_river"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.05, 0)
mesh = SubResource("fishing_disc_mesh")
material_override = SubResource("fishing_water_mat")

[node name="SpotLabel" type="Label3D" parent="Zones/FishingSpots/FishingSpot_river"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 2.5, 0)
text = "Wharf Pier - Fishing Spot"
font_size = 28
outline_size = 6
modulate = Color(0.6, 0.75, 0.9, 1)
billboard = 1

[node name="HintLabel" type="Label3D" parent="Zones/FishingSpots/FishingSpot_river"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 2.0, 0)
text = "Equip Rod + Press E"
font_size = 20
outline_size = 4
modulate = Color(0.8, 0.8, 0.8, 0.8)
billboard = 1

[node name="FishingSpot_ocean" type="Node3D" parent="Zones/FishingSpots" groups=["fishing_spot"]]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -95, 1, -35)
metadata/fishing_table_id = "ocean"

[node name="WaterDisc" type="MeshInstance3D" parent="Zones/FishingSpots/FishingSpot_ocean"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.05, 0)
mesh = SubResource("fishing_disc_mesh")
material_override = SubResource("fishing_water_mat")

[node name="SpotLabel" type="Label3D" parent="Zones/FishingSpots/FishingSpot_ocean"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 2.5, 0)
text = "Open Ocean - Fishing Spot"
font_size = 28
outline_size = 6
modulate = Color(0.6, 0.75, 0.9, 1)
billboard = 1

[node name="HintLabel" type="Label3D" parent="Zones/FishingSpots/FishingSpot_ocean"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 2.0, 0)
text = "Equip Rod + Press E"
font_size = 20
outline_size = 4
modulate = Color(0.8, 0.8, 0.8, 0.8)
billboard = 1

; New fishing spots (F4-F8)
[node name="FishingSpot_bay" type="Node3D" parent="Zones/FishingSpots" groups=["fishing_spot"]]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -75, 1, -28)
metadata/fishing_table_id = "bay"

[node name="WaterDisc" type="MeshInstance3D" parent="Zones/FishingSpots/FishingSpot_bay"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.05, 0)
mesh = SubResource("fishing_disc_mesh")
material_override = SubResource("fishing_water_mat")

[node name="SpotLabel" type="Label3D" parent="Zones/FishingSpots/FishingSpot_bay"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 2.5, 0)
text = "Sheltered Bay - Fishing Spot"
font_size = 28
outline_size = 6
modulate = Color(0.6, 0.75, 0.9, 1)
billboard = 1

[node name="HintLabel" type="Label3D" parent="Zones/FishingSpots/FishingSpot_bay"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 2.0, 0)
text = "Equip Rod + Press E"
font_size = 20
outline_size = 4
modulate = Color(0.8, 0.8, 0.8, 0.8)
billboard = 1

[node name="FishingSpot_tidepools" type="Node3D" parent="Zones/FishingSpots" groups=["fishing_spot"]]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -100, 1, -42)
metadata/fishing_table_id = "tidepools"

[node name="WaterDisc" type="MeshInstance3D" parent="Zones/FishingSpots/FishingSpot_tidepools"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.05, 0)
mesh = SubResource("fishing_disc_mesh")
material_override = SubResource("fishing_water_mat")

[node name="SpotLabel" type="Label3D" parent="Zones/FishingSpots/FishingSpot_tidepools"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 2.5, 0)
text = "Tide Pools - Fishing Spot"
font_size = 28
outline_size = 6
modulate = Color(0.6, 0.75, 0.9, 1)
billboard = 1

[node name="HintLabel" type="Label3D" parent="Zones/FishingSpots/FishingSpot_tidepools"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 2.0, 0)
text = "Equip Rod + Press E"
font_size = 20
outline_size = 4
modulate = Color(0.8, 0.8, 0.8, 0.8)
billboard = 1

[node name="FishingSpot_lighthouse" type="Node3D" parent="Zones/FishingSpots" groups=["fishing_spot"]]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -108, 1, -48)
metadata/fishing_table_id = "lighthouse"

[node name="WaterDisc" type="MeshInstance3D" parent="Zones/FishingSpots/FishingSpot_lighthouse"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.05, 0)
mesh = SubResource("fishing_disc_mesh")
material_override = SubResource("fishing_water_mat")

[node name="SpotLabel" type="Label3D" parent="Zones/FishingSpots/FishingSpot_lighthouse"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 2.5, 0)
text = "Lighthouse Point - Fishing Spot"
font_size = 28
outline_size = 6
modulate = Color(0.6, 0.75, 0.9, 1)
billboard = 1

[node name="HintLabel" type="Label3D" parent="Zones/FishingSpots/FishingSpot_lighthouse"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 2.0, 0)
text = "Equip Rod + Press E"
font_size = 20
outline_size = 4
modulate = Color(0.8, 0.8, 0.8, 0.8)
billboard = 1

[node name="FishingSpot_harbor" type="Node3D" parent="Zones/FishingSpots" groups=["fishing_spot"]]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 20, 7, 65)
metadata/fishing_table_id = "harbor"

[node name="WaterDisc" type="MeshInstance3D" parent="Zones/FishingSpots/FishingSpot_harbor"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.05, 0)
mesh = SubResource("fishing_disc_mesh")
material_override = SubResource("fishing_water_mat")

[node name="SpotLabel" type="Label3D" parent="Zones/FishingSpots/FishingSpot_harbor"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 2.5, 0)
text = "Harbor Pool - Fishing Spot"
font_size = 28
outline_size = 6
modulate = Color(0.6, 0.75, 0.9, 1)
billboard = 1

[node name="HintLabel" type="Label3D" parent="Zones/FishingSpots/FishingSpot_harbor"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 2.0, 0)
text = "Equip Rod + Press E"
font_size = 20
outline_size = 4
modulate = Color(0.8, 0.8, 0.8, 0.8)
billboard = 1

[node name="FishingSpot_beach" type="Node3D" parent="Zones/FishingSpots" groups=["fishing_spot"]]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -85, 1, -38)
metadata/fishing_table_id = "beach"

[node name="WaterDisc" type="MeshInstance3D" parent="Zones/FishingSpots/FishingSpot_beach"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.05, 0)
mesh = SubResource("fishing_disc_mesh")
material_override = SubResource("fishing_water_mat")

[node name="SpotLabel" type="Label3D" parent="Zones/FishingSpots/FishingSpot_beach"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 2.5, 0)
text = "Sandy Beach - Fishing Spot"
font_size = 28
outline_size = 6
modulate = Color(0.6, 0.75, 0.9, 1)
billboard = 1

[node name="HintLabel" type="Label3D" parent="Zones/FishingSpots/FishingSpot_beach"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 2.0, 0)
text = "Equip Rod + Press E"
font_size = 20
outline_size = 4
modulate = Color(0.8, 0.8, 0.8, 0.8)
billboard = 1

; === PORTAL VISUALS (at new positions, with pre-placed interaction Area3Ds) ===
[node name="Portals" type="Node3D" parent="Zones/WildZone"]

; --- The Wilds portal ---
[node name="Portal_default" type="Node3D" parent="Zones/WildZone/Portals"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -11.25, 2, -30.5)

[node name="PillarL" type="MeshInstance3D" parent="Zones/WildZone/Portals/Portal_default"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -2, 2.5, 0)
mesh = SubResource("portal_pillar_mesh")
material_override = SubResource("portal_mat_default")

[node name="PillarR" type="MeshInstance3D" parent="Zones/WildZone/Portals/Portal_default"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 2, 2.5, 0)
mesh = SubResource("portal_pillar_mesh")
material_override = SubResource("portal_mat_default")

[node name="Lintel" type="MeshInstance3D" parent="Zones/WildZone/Portals/Portal_default"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 5.4, 0)
mesh = SubResource("portal_lintel_mesh")
material_override = SubResource("portal_mat_default")

[node name="Disc" type="MeshInstance3D" parent="Zones/WildZone/Portals/Portal_default"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.05, 0)
mesh = SubResource("portal_disc_mesh")
material_override = SubResource("portal_disc_mat_default")

[node name="Light" type="OmniLight3D" parent="Zones/WildZone/Portals/Portal_default"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 3, 0)
light_color = Color(0.6, 0.2, 0.8, 1)
light_energy = 1.5
omni_range = 6.0

[node name="SignLabel" type="Label3D" parent="Zones/WildZone/Portals/Portal_default"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 6.5, 0)
text = "The Wilds"
font_size = 48
outline_size = 10
modulate = Color(0.6, 0.2, 0.8, 1)
billboard = 1

[node name="HintLabel" type="Label3D" parent="Zones/WildZone/Portals/Portal_default"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 2.5, 0)
text = "Press E to Enter"
font_size = 24
outline_size = 6
modulate = Color(0.8, 0.8, 0.8, 0.8)
billboard = 1

; --- Coastal Wreckage portal ---
[node name="Portal_coastal" type="Node3D" parent="Zones/WildZone/Portals"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -106.25, 1, -37.5)

[node name="PillarL" type="MeshInstance3D" parent="Zones/WildZone/Portals/Portal_coastal"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -2, 2.5, 0)
mesh = SubResource("portal_pillar_mesh")
material_override = SubResource("portal_mat_coastal")

[node name="PillarR" type="MeshInstance3D" parent="Zones/WildZone/Portals/Portal_coastal"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 2, 2.5, 0)
mesh = SubResource("portal_pillar_mesh")
material_override = SubResource("portal_mat_coastal")

[node name="Lintel" type="MeshInstance3D" parent="Zones/WildZone/Portals/Portal_coastal"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 5.4, 0)
mesh = SubResource("portal_lintel_mesh")
material_override = SubResource("portal_mat_coastal")

[node name="Disc" type="MeshInstance3D" parent="Zones/WildZone/Portals/Portal_coastal"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.05, 0)
mesh = SubResource("portal_disc_mesh")
material_override = SubResource("portal_disc_mat_coastal")

[node name="Light" type="OmniLight3D" parent="Zones/WildZone/Portals/Portal_coastal"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 3, 0)
light_color = Color(0.2, 0.6, 0.8, 1)
light_energy = 1.5
omni_range = 6.0

[node name="SignLabel" type="Label3D" parent="Zones/WildZone/Portals/Portal_coastal"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 6.5, 0)
text = "Coastal Wreckage"
font_size = 48
outline_size = 10
modulate = Color(0.2, 0.6, 0.8, 1)
billboard = 1

[node name="HintLabel" type="Label3D" parent="Zones/WildZone/Portals/Portal_coastal"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 2.5, 0)
text = "Press E to Enter"
font_size = 24
outline_size = 6
modulate = Color(0.8, 0.8, 0.8, 0.8)
billboard = 1

; --- Fungal Hollow portal ---
[node name="Portal_fungal" type="Node3D" parent="Zones/WildZone/Portals"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -15, 4, -16.25)

[node name="PillarL" type="MeshInstance3D" parent="Zones/WildZone/Portals/Portal_fungal"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -2, 2.5, 0)
mesh = SubResource("portal_pillar_mesh")
material_override = SubResource("portal_mat_fungal")

[node name="PillarR" type="MeshInstance3D" parent="Zones/WildZone/Portals/Portal_fungal"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 2, 2.5, 0)
mesh = SubResource("portal_pillar_mesh")
material_override = SubResource("portal_mat_fungal")

[node name="Lintel" type="MeshInstance3D" parent="Zones/WildZone/Portals/Portal_fungal"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 5.4, 0)
mesh = SubResource("portal_lintel_mesh")
material_override = SubResource("portal_mat_fungal")

[node name="Disc" type="MeshInstance3D" parent="Zones/WildZone/Portals/Portal_fungal"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.05, 0)
mesh = SubResource("portal_disc_mesh")
material_override = SubResource("portal_disc_mat_fungal")

[node name="Light" type="OmniLight3D" parent="Zones/WildZone/Portals/Portal_fungal"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 3, 0)
light_color = Color(0.4, 0.2, 0.6, 1)
light_energy = 1.5
omni_range = 6.0

[node name="SignLabel" type="Label3D" parent="Zones/WildZone/Portals/Portal_fungal"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 6.5, 0)
text = "Fungal Hollow"
font_size = 48
outline_size = 10
modulate = Color(0.4, 0.2, 0.6, 1)
billboard = 1

[node name="HintLabel" type="Label3D" parent="Zones/WildZone/Portals/Portal_fungal"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 2.5, 0)
text = "Press E to Enter"
font_size = 24
outline_size = 6
modulate = Color(0.8, 0.8, 0.8, 0.8)
billboard = 1

; --- Volcanic Crest portal ---
[node name="Portal_volcanic" type="Node3D" parent="Zones/WildZone/Portals"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 52.5, 8, 28.75)

[node name="PillarL" type="MeshInstance3D" parent="Zones/WildZone/Portals/Portal_volcanic"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -2, 2.5, 0)
mesh = SubResource("portal_pillar_mesh")
material_override = SubResource("portal_mat_volcanic")

[node name="PillarR" type="MeshInstance3D" parent="Zones/WildZone/Portals/Portal_volcanic"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 2, 2.5, 0)
mesh = SubResource("portal_pillar_mesh")
material_override = SubResource("portal_mat_volcanic")

[node name="Lintel" type="MeshInstance3D" parent="Zones/WildZone/Portals/Portal_volcanic"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 5.4, 0)
mesh = SubResource("portal_lintel_mesh")
material_override = SubResource("portal_mat_volcanic")

[node name="Disc" type="MeshInstance3D" parent="Zones/WildZone/Portals/Portal_volcanic"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.05, 0)
mesh = SubResource("portal_disc_mesh")
material_override = SubResource("portal_disc_mat_volcanic")

[node name="Light" type="OmniLight3D" parent="Zones/WildZone/Portals/Portal_volcanic"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 3, 0)
light_color = Color(0.9, 0.3, 0.1, 1)
light_energy = 1.5
omni_range = 6.0

[node name="SignLabel" type="Label3D" parent="Zones/WildZone/Portals/Portal_volcanic"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 6.5, 0)
text = "Volcanic Crest"
font_size = 48
outline_size = 10
modulate = Color(0.9, 0.3, 0.1, 1)
billboard = 1

[node name="HintLabel" type="Label3D" parent="Zones/WildZone/Portals/Portal_volcanic"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 2.5, 0)
text = "Press E to Enter"
font_size = 24
outline_size = 6
modulate = Color(0.8, 0.8, 0.8, 0.8)
billboard = 1

; --- Frozen Pantry portal ---
[node name="Portal_frozen" type="Node3D" parent="Zones/WildZone/Portals"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -36.25, 5, 100)

[node name="PillarL" type="MeshInstance3D" parent="Zones/WildZone/Portals/Portal_frozen"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -2, 2.5, 0)
mesh = SubResource("portal_pillar_mesh")
material_override = SubResource("portal_mat_frozen")

[node name="PillarR" type="MeshInstance3D" parent="Zones/WildZone/Portals/Portal_frozen"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 2, 2.5, 0)
mesh = SubResource("portal_pillar_mesh")
material_override = SubResource("portal_mat_frozen")

[node name="Lintel" type="MeshInstance3D" parent="Zones/WildZone/Portals/Portal_frozen"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 5.4, 0)
mesh = SubResource("portal_lintel_mesh")
material_override = SubResource("portal_mat_frozen")

[node name="Disc" type="MeshInstance3D" parent="Zones/WildZone/Portals/Portal_frozen"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.05, 0)
mesh = SubResource("portal_disc_mesh")
material_override = SubResource("portal_disc_mat_frozen")

[node name="Light" type="OmniLight3D" parent="Zones/WildZone/Portals/Portal_frozen"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 3, 0)
light_color = Color(0.5, 0.8, 0.95, 1)
light_energy = 1.5
omni_range = 6.0

[node name="SignLabel" type="Label3D" parent="Zones/WildZone/Portals/Portal_frozen"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 6.5, 0)
text = "Frozen Pantry"
font_size = 48
outline_size = 10
modulate = Color(0.5, 0.8, 0.95, 1)
billboard = 1

[node name="HintLabel" type="Label3D" parent="Zones/WildZone/Portals/Portal_frozen"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 2.5, 0)
text = "Press E to Enter"
font_size = 24
outline_size = 6
modulate = Color(0.8, 0.8, 0.8, 0.8)
billboard = 1

; === CALENDAR BOARD (near Town Hall) ===
[node name="CalendarBoard" type="Area3D" parent="Zones/RestaurantZone"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -30, 4, 2)
script = ExtResource("33")

[node name="BoardMesh" type="MeshInstance3D" parent="Zones/RestaurantZone/CalendarBoard"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1.2, 0)
mesh = SubResource("calendar_board_mesh")
material_override = SubResource("calendar_board_mat")

[node name="PostMesh" type="MeshInstance3D" parent="Zones/RestaurantZone/CalendarBoard"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1.0, 0)
mesh = SubResource("calendar_post_mesh")
material_override = SubResource("calendar_post_mat")

[node name="BoardLabel" type="Label3D" parent="Zones/RestaurantZone/CalendarBoard"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 2.5, 0)
text = "Town Calendar"
font_size = 32
outline_size = 6
modulate = Color(0.8, 0.6, 0.3, 1)
billboard = 1

; === TRAINER NPCs (repositioned per plan) ===
[node name="Trainers" type="Node3D" parent="Zones"]

[node name="SousChefPepper" type="Area3D" parent="Zones/Trainers"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -20, 4, 3.75)
script = ExtResource("9")
trainer_id = "sous_chef_pepper"

[node name="FarmerGreen" type="Area3D" parent="Zones/Trainers"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -10, 3, 22.5)
script = ExtResource("9")
trainer_id = "farmer_green"

[node name="ChefUmami" type="Area3D" parent="Zones/Trainers"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 20, 7, 40)
script = ExtResource("9")
trainer_id = "chef_umami"
is_gatekeeper = true

[node name="PastryChefDulce" type="Area3D" parent="Zones/Trainers"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -23.25, 4, -5.5)
script = ExtResource("9")
trainer_id = "pastry_chef_dulce"

[node name="BrinemasterVlad" type="Area3D" parent="Zones/Trainers"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -55, 2, -26)
script = ExtResource("9")
trainer_id = "brinemaster_vlad"

[node name="HeadChefRoux" type="Area3D" parent="Zones/Trainers"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -40.5, 4, 3.75)
script = ExtResource("9")
trainer_id = "head_chef_roux"
is_gatekeeper = true

[node name="GrandChefMichelin" type="Area3D" parent="Zones/Trainers"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -32.5, 4, -3)
script = ExtResource("9")
trainer_id = "grand_chef_michelin"

; === SHOP NPCs (repositioned) ===
[node name="Shops" type="Node3D" parent="Zones"]

[node name="GeneralStore" type="Area3D" parent="Zones/Shops"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -35.5, 4, -6.25)
script = ExtResource("17")
shop_id = "general_store"

[node name="BattleSupplies" type="Area3D" parent="Zones/Shops"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -60, 2, -25)
script = ExtResource("17")
shop_id = "battle_supplies"

[node name="RareGoods" type="Area3D" parent="Zones/Shops"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -15, 5, -20)
script = ExtResource("17")
shop_id = "rare_goods"

; === SOCIAL NPCs (repositioned near associated buildings) ===
[node name="SocialNPCs" type="Node3D" parent="Zones"]

[node name="HubertCrumb" type="Area3D" parent="Zones/SocialNPCs"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -20.25, 4, 6)
script = ExtResource("18")
npc_id = "npc_hubert"

[node name="OldSageMurphy" type="Area3D" parent="Zones/SocialNPCs"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 17, 7, 44)
script = ExtResource("18")
npc_id = "npc_murphy"

[node name="CaptainSalHaddock" type="Area3D" parent="Zones/SocialNPCs"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -46.75, 2, -30)
script = ExtResource("18")
npc_id = "npc_captain_sal"

[node name="PepperSantos" type="Area3D" parent="Zones/SocialNPCs"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -40.25, 4, 6)
script = ExtResource("18")
npc_id = "npc_pepper"

[node name="ProfessorQuill" type="Area3D" parent="Zones/SocialNPCs"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -55, 4, 1)
script = ExtResource("18")
npc_id = "npc_quill"

[node name="MayorRosemary" type="Area3D" parent="Zones/SocialNPCs"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -32.5, 4, 2)
script = ExtResource("18")
npc_id = "npc_mayor"

[node name="InnkeeperMabel" type="Area3D" parent="Zones/SocialNPCs"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -71, 2, -20)
script = ExtResource("18")
npc_id = "npc_innkeeper"

[node name="ClayBrennan" type="Area3D" parent="Zones/SocialNPCs"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -23.25, 4, -3)
script = ExtResource("18")
npc_id = "npc_potter"

[node name="ScarletWinters" type="Area3D" parent="Zones/SocialNPCs"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -55, 4, -1)
script = ExtResource("18")
npc_id = "npc_tailor"

[node name="IrisGreenthumb" type="Area3D" parent="Zones/SocialNPCs"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -51, 4, 4.5)
script = ExtResource("18")
npc_id = "npc_gardener"

[node name="DrHoney" type="Area3D" parent="Zones/SocialNPCs"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -60, 4, 2.5)
script = ExtResource("18")
npc_id = "npc_doctor"

[node name="HazelMapleton" type="Area3D" parent="Zones/SocialNPCs"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -35.5, 4, -4)
script = ExtResource("18")
npc_id = "npc_general_store"

[node name="ClementineSmith" type="Area3D" parent="Zones/SocialNPCs"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -30, 4, 8)
script = ExtResource("18")
npc_id = "npc_clementine"

[node name="RiverSong" type="Area3D" parent="Zones/SocialNPCs"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -60, 2, -28)
script = ExtResource("18")
npc_id = "npc_river"

[node name="AlexHartwell" type="Area3D" parent="Zones/SocialNPCs"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -32.5, 4, 5)
script = ExtResource("18")
npc_id = "npc_alex"

; === MY RESTAURANT DOOR (static, near Salty Ladle in Harbor Heights) ===
[node name="MyRestaurantDoor" type="Area3D" parent="Zones"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 34, 7, 57)
collision_layer = 0
collision_mask = 3

[node name="CollisionShape3D" type="CollisionShape3D" parent="Zones/MyRestaurantDoor"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1.75, 0)
shape = SubResource("restaurant_door_box")

[node name="DoorFrame" type="MeshInstance3D" parent="Zones/MyRestaurantDoor"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1.5, 0)
mesh = SubResource("restaurant_door_frame_mesh")
material_override = SubResource("restaurant_door_frame_mat")

[node name="DoorMesh" type="MeshInstance3D" parent="Zones/MyRestaurantDoor"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1.5, 0.05)
mesh = SubResource("restaurant_door_main_mesh")
material_override = SubResource("restaurant_door_main_mat")

[node name="GroundHighlight" type="MeshInstance3D" parent="Zones/MyRestaurantDoor"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.03, -1.2)
mesh = SubResource("restaurant_door_ground_mesh")
material_override = SubResource("restaurant_door_ground_mat")

[node name="FloatingIndicator" type="MeshInstance3D" parent="Zones/MyRestaurantDoor"]
transform = Transform3D(0.707, 0, 0.707, 0, 1, 0, -0.707, 0, 0.707, 0, 4.2, 0)
mesh = SubResource("restaurant_door_indicator_mesh")
material_override = SubResource("restaurant_door_indicator_mat")

[node name="Label3D" type="Label3D" parent="Zones/MyRestaurantDoor"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 3.6, -0.3)
text = "My Restaurant"
font_size = 64
outline_size = 14
modulate = Color(1, 0.95, 0.8, 1)
billboard = 1

; === BANK NPC (Phase 5: pre-placed, near General Store) ===
[node name="BankNPC" type="Area3D" parent="Zones"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -34, 4, -5)
script = ExtResource("34")

[node name="BankShape" type="CollisionShape3D" parent="Zones/BankNPC"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1.5, 0)
shape = SubResource("bank_interact_shape")

; ==================== MANAGERS ====================
[node name="RestaurantManager" type="Node" parent="."]
script = ExtResource("16")

[node name="SocialManager" type="Node" parent="."]
script = ExtResource("19")

[node name="LocationManager" type="Node" parent="."]
script = ExtResource("20")

[node name="QuestManager" type="Node" parent="."]
script = ExtResource("21")

[node name="FriendManager" type="Node" parent="."]
script = ExtResource("22")

[node name="WorldItemManager" type="Node" parent="."]
script = ExtResource("15")

[node name="WorldItems" type="Node3D" parent="."]

[node name="ExcursionManager" type="Node" parent="."]
script = ExtResource("23")

[node name="DayNightController" type="Node" parent="."]
script = ExtResource("24")

; ==================== DISTRICTS ====================
[node name="Districts" type="Node3D" parent="."]

[node name="TownSquare" parent="Districts" instance=ExtResource("25")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -30, 4, 5)

[node name="WharfWalk" parent="Districts" instance=ExtResource("26")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -55, 2, -28)

[node name="MarketRow" parent="Districts" instance=ExtResource("27")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -55, 4, 2)

[node name="HarborHeights" parent="Districts" instance=ExtResource("28")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 32, 7, 50)

[node name="FarmDecor" parent="Districts" instance=ExtResource("29")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -12.5, 3, 16.25)

; ==================== PATHS & ENVIRONMENTAL DRESSING (Phase 8) ====================
[node name="Dressing" type="Node3D" parent="."]

; --- Path surfaces (tan colored strips) ---
[node name="Paths" type="Node3D" parent="Dressing"]

; Main street through Town Square
[node name="MainStreet" type="MeshInstance3D" parent="Dressing/Paths"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -35, 4.02, 5)
mesh = SubResource("town_mesh")

; --- Trees along forest edges ---
[node name="Trees" type="Node3D" parent="Dressing"]

; Southern forest boundary trees
[node name="SouthTree1" parent="Dressing/Trees" instance=ExtResource("36")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -30, 5, -45)

[node name="SouthTree2" parent="Dressing/Trees" instance=ExtResource("35")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -20, 5, -48)

[node name="SouthTree3" parent="Dressing/Trees" instance=ExtResource("39")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -10, 5, -46)

[node name="SouthTree4" parent="Dressing/Trees" instance=ExtResource("40")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 5, -50)

[node name="SouthTree5" parent="Dressing/Trees" instance=ExtResource("36")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 10, 5, -47)

[node name="SouthTree6" parent="Dressing/Trees" instance=ExtResource("35")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 20, 5, -49)

; Redwood forest trees
[node name="RedwoodTree1" parent="Dressing/Trees" instance=ExtResource("36")]
transform = Transform3D(1.5, 0, 0, 0, 1.5, 0, 0, 0, 1.5, 20, 8, 85)

[node name="RedwoodTree2" parent="Dressing/Trees" instance=ExtResource("36")]
transform = Transform3D(1.5, 0, 0, 0, 1.5, 0, 0, 0, 1.5, 30, 8, 90)

[node name="RedwoodTree3" parent="Dressing/Trees" instance=ExtResource("36")]
transform = Transform3D(1.5, 0, 0, 0, 1.5, 0, 0, 0, 1.5, 40, 8, 88)

[node name="RedwoodTree4" parent="Dressing/Trees" instance=ExtResource("36")]
transform = Transform3D(1.5, 0, 0, 0, 1.5, 0, 0, 0, 1.5, 35, 8, 95)

; Town Square park trees
[node name="TownTree1" parent="Dressing/Trees" instance=ExtResource("35")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -25, 4, 10)

[node name="TownTree2" parent="Dressing/Trees" instance=ExtResource("39")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -40, 4, 10)

[node name="TownTree3" parent="Dressing/Trees" instance=ExtResource("40")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -35, 4, -10)

; Farm area trees
[node name="FarmTree1" parent="Dressing/Trees" instance=ExtResource("35")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -20, 3, 28)

[node name="FarmTree2" parent="Dressing/Trees" instance=ExtResource("39")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 3, 30)

; Harbor Heights trees
[node name="HarborTree1" parent="Dressing/Trees" instance=ExtResource("35")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 25, 7, 55)

[node name="HarborTree2" parent="Dressing/Trees" instance=ExtResource("40")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 40, 7, 45)

; Wharf area trees
[node name="WharfTree1" parent="Dressing/Trees" instance=ExtResource("35")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -65, 2, -15)

[node name="WharfTree2" parent="Dressing/Trees" instance=ExtResource("39")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -45, 2, -35)

; --- Rocks near cliffs and volcanic areas ---
[node name="Rocks" type="Node3D" parent="Dressing"]

; Rocky outcrop east decorative rocks
[node name="EastRock1" parent="Dressing/Rocks" instance=ExtResource("37")]
transform = Transform3D(2, 0, 0, 0, 2, 0, 0, 0, 2, 55, 4, -10)

[node name="EastRock2" parent="Dressing/Rocks" instance=ExtResource("38")]
transform = Transform3D(1.5, 0, 0, 0, 1.5, 0, 0, 0, 1.5, 58, 3, 10)

[node name="EastRock3" parent="Dressing/Rocks" instance=ExtResource("37")]
transform = Transform3D(1.8, 0, 0, 0, 1.8, 0, 0, 0, 1.8, 52, 5, 20)

; Cliff edge rocks
[node name="CliffRock1" parent="Dressing/Rocks" instance=ExtResource("38")]
transform = Transform3D(2, 0, 0, 0, 2, 0, 0, 0, 2, -100, 1, -45)

[node name="CliffRock2" parent="Dressing/Rocks" instance=ExtResource("37")]
transform = Transform3D(1.5, 0, 0, 0, 1.5, 0, 0, 0, 1.5, -85, 1, -42)

; Wilderness rocks
[node name="WildRock1" parent="Dressing/Rocks" instance=ExtResource("38")]
transform = Transform3D(1.3, 0, 0, 0, 1.3, 0, 0, 0, 1.3, -20, 5, -22)

[node name="WildRock2" parent="Dressing/Rocks" instance=ExtResource("37")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -40, 5, -35)

; Volcanic area rocks
[node name="VolcanicRock1" parent="Dressing/Rocks" instance=ExtResource("37")]
transform = Transform3D(2.5, 0, 0, 0, 2.5, 0, 0, 0, 2.5, 48, 8, 25)

[node name="VolcanicRock2" parent="Dressing/Rocks" instance=ExtResource("38")]
transform = Transform3D(2, 0, 0, 0, 2, 0, 0, 0, 2, 55, 7, 32)

; ==================== UI ====================
[node name="UI" type="Node" parent="."]

[node name="PvPChallengeUI" parent="UI" instance=ExtResource("10")]

[node name="TrainerDialogueUI" parent="UI" instance=ExtResource("11")]
