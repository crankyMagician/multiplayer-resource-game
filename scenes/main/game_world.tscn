[gd_scene load_steps=68 format=3]

[ext_resource type="Script" path="res://scripts/world/game_world.gd" id="1"]
[ext_resource type="Script" path="res://scripts/world/season_manager.gd" id="2"]
[ext_resource type="Script" path="res://scripts/world/encounter_manager.gd" id="3"]
[ext_resource type="Script" path="res://scripts/battle/battle_manager.gd" id="4"]
[ext_resource type="Script" path="res://scripts/crafting/crafting_system.gd" id="5"]
[ext_resource type="Script" path="res://scripts/world/farm_manager.gd" id="6"]
[ext_resource type="Script" path="res://scripts/world/tall_grass.gd" id="7"]
[ext_resource type="Script" path="res://scripts/world/farm_plot.gd" id="8"]
[ext_resource type="Script" path="res://scripts/world/trainer_npc.gd" id="9"]
[ext_resource type="PackedScene" path="res://scenes/ui/pvp_challenge_ui.tscn" id="10"]
[ext_resource type="PackedScene" path="res://scenes/ui/trainer_dialogue_ui.tscn" id="11"]
[ext_resource type="Script" path="res://scripts/world/crafting_station.gd" id="12"]
[ext_resource type="Script" path="res://scripts/world/storage_station.gd" id="14"]
[ext_resource type="Script" path="res://scripts/world/recipe_pickup.gd" id="13"]
[ext_resource type="Script" path="res://scripts/world/world_item_manager.gd" id="15"]
[ext_resource type="Script" path="res://scripts/world/restaurant_manager.gd" id="16"]
[ext_resource type="Script" path="res://scripts/world/shop_npc.gd" id="17"]
[ext_resource type="Script" path="res://scripts/world/social_npc.gd" id="18"]
[ext_resource type="Script" path="res://scripts/world/social_manager.gd" id="19"]
[ext_resource type="Script" path="res://scripts/world/location_manager.gd" id="20"]
[ext_resource type="Script" path="res://scripts/world/quest_manager.gd" id="21"]
[ext_resource type="Script" path="res://scripts/world/friend_manager.gd" id="22"]
[ext_resource type="Script" path="res://scripts/world/excursion_manager.gd" id="23"]
[ext_resource type="Script" path="res://scripts/world/day_night_controller.gd" id="24"]
[ext_resource type="PackedScene" path="res://scenes/world/districts/district_town_square.tscn" id="25"]
[ext_resource type="PackedScene" path="res://scenes/world/districts/district_wharf_walk.tscn" id="26"]
[ext_resource type="PackedScene" path="res://scenes/world/districts/district_market_row.tscn" id="27"]
[ext_resource type="PackedScene" path="res://scenes/world/districts/district_harbor_heights.tscn" id="28"]
[ext_resource type="PackedScene" path="res://scenes/world/districts/district_farm_zone.tscn" id="29"]
[ext_resource type="PackedScene" path="res://scenes/world/districts/district_wilderness.tscn" id="30"]
[ext_resource type="PackedScene" path="res://scenes/world/harvestable_object.tscn" id="31"]
[ext_resource type="Script" path="res://scripts/world/dig_spot.gd" id="32"]
[ext_resource type="Script" path="res://scripts/world/calendar_board.gd" id="33"]

; --- Base ground ---
[sub_resource type="BoxShape3D" id="ground_shape"]
size = Vector3(300, 0.2, 300)

[sub_resource type="BoxMesh" id="ground_mesh"]
size = Vector3(300, 0.2, 300)

[sub_resource type="StandardMaterial3D" id="ground_mat"]
albedo_color = Color(0.3, 0.55, 0.25, 1)

; --- Functional collision shapes ---
[sub_resource type="BoxShape3D" id="building_shape"]
size = Vector3(6, 4, 6)

[sub_resource type="BoxShape3D" id="table_interact_shape"]
size = Vector3(3, 2, 2)

[sub_resource type="BoxShape3D" id="storage_interact_shape"]
size = Vector3(3, 2, 2.5)

[sub_resource type="BoxShape3D" id="station_interact_shape"]
size = Vector3(3.5, 2, 2.5)

[sub_resource type="BoxShape3D" id="water_interact_shape"]
size = Vector3(3, 2, 3)

[sub_resource type="BoxShape3D" id="grass_area_shape"]
size = Vector3(8, 2, 8)

[sub_resource type="SphereShape3D" id="pickup_shape"]
radius = 2.0

; --- Ground overlay meshes & materials ---
[sub_resource type="BoxMesh" id="zone_town_mesh"]
size = Vector3(28, 0.12, 22)

[sub_resource type="StandardMaterial3D" id="zone_town_mat"]
albedo_color = Color(0.78, 0.72, 0.62, 1)

[sub_resource type="BoxMesh" id="zone_wharf_mesh"]
size = Vector3(26, 0.12, 22)

[sub_resource type="StandardMaterial3D" id="zone_wharf_mat"]
albedo_color = Color(0.45, 0.42, 0.38, 1)

[sub_resource type="BoxMesh" id="zone_market_mesh"]
size = Vector3(16, 0.12, 20)

[sub_resource type="StandardMaterial3D" id="zone_market_mat"]
albedo_color = Color(0.65, 0.45, 0.35, 1)

[sub_resource type="BoxMesh" id="zone_harbor_mesh"]
size = Vector3(30, 0.12, 28)

[sub_resource type="StandardMaterial3D" id="zone_harbor_mat"]
albedo_color = Color(0.35, 0.6, 0.3, 1)

[sub_resource type="BoxShape3D" id="zone_harbor_col_shape"]
size = Vector3(30, 0.3, 28)

[sub_resource type="BoxMesh" id="zone_farm_mesh"]
size = Vector3(18, 0.12, 18)

[sub_resource type="StandardMaterial3D" id="zone_farm_mat"]
albedo_color = Color(0.5, 0.4, 0.25, 1)

[sub_resource type="BoxMesh" id="zone_wild_mesh"]
size = Vector3(50, 0.12, 60)

[sub_resource type="StandardMaterial3D" id="zone_wild_mat"]
albedo_color = Color(0.22, 0.4, 0.18, 1)

; --- Path meshes ---
[sub_resource type="BoxMesh" id="path_spawn_south_mesh"]
size = Vector3(4, 0.06, 18)

[sub_resource type="BoxMesh" id="path_to_wharf_mesh"]
size = Vector3(14, 0.06, 4)

[sub_resource type="BoxMesh" id="path_to_market_mesh"]
size = Vector3(14, 0.06, 4)

[sub_resource type="BoxMesh" id="path_to_farm_mesh"]
size = Vector3(12, 0.06, 4)

[sub_resource type="BoxMesh" id="path_to_harbor_mesh"]
size = Vector3(4, 0.06, 12)

; --- Path material ---
[sub_resource type="StandardMaterial3D" id="path_mat"]
albedo_color = Color(0.6, 0.5, 0.35, 1)

; --- Ramp mesh + collision ---
[sub_resource type="BoxMesh" id="ramp_mesh"]
size = Vector3(6, 0.3, 28.3)

[sub_resource type="StandardMaterial3D" id="ramp_mat"]
albedo_color = Color(0.5, 0.55, 0.4, 1)

[sub_resource type="BoxShape3D" id="ramp_col_shape"]
size = Vector3(6, 0.3, 28.3)

; --- Portal archway meshes ---
[sub_resource type="BoxMesh" id="portal_pillar_mesh"]
size = Vector3(0.6, 5, 0.6)

[sub_resource type="BoxMesh" id="portal_lintel_mesh"]
size = Vector3(5, 0.8, 0.6)

[sub_resource type="CylinderMesh" id="portal_disc_mesh"]
top_radius = 2.5
bottom_radius = 2.5
height = 0.1

; --- Portal materials (one per portal color) ---
[sub_resource type="StandardMaterial3D" id="portal_mat_default"]
albedo_color = Color(0.42, 0.14, 0.56, 1)
emission_enabled = true
emission = Color(0.6, 0.2, 0.8, 1)
emission_energy_multiplier = 0.4

[sub_resource type="StandardMaterial3D" id="portal_disc_mat_default"]
albedo_color = Color(0.6, 0.2, 0.8, 0.3)
transparency = 1
emission_enabled = true
emission = Color(0.6, 0.2, 0.8, 1)
emission_energy_multiplier = 1.5

[sub_resource type="StandardMaterial3D" id="portal_mat_coastal"]
albedo_color = Color(0.14, 0.42, 0.56, 1)
emission_enabled = true
emission = Color(0.2, 0.6, 0.8, 1)
emission_energy_multiplier = 0.4

[sub_resource type="StandardMaterial3D" id="portal_disc_mat_coastal"]
albedo_color = Color(0.2, 0.6, 0.8, 0.3)
transparency = 1
emission_enabled = true
emission = Color(0.2, 0.6, 0.8, 1)
emission_energy_multiplier = 1.5

[sub_resource type="StandardMaterial3D" id="portal_mat_fungal"]
albedo_color = Color(0.28, 0.14, 0.42, 1)
emission_enabled = true
emission = Color(0.4, 0.2, 0.6, 1)
emission_energy_multiplier = 0.4

[sub_resource type="StandardMaterial3D" id="portal_disc_mat_fungal"]
albedo_color = Color(0.4, 0.2, 0.6, 0.3)
transparency = 1
emission_enabled = true
emission = Color(0.4, 0.2, 0.6, 1)
emission_energy_multiplier = 1.5

[sub_resource type="StandardMaterial3D" id="portal_mat_volcanic"]
albedo_color = Color(0.63, 0.21, 0.07, 1)
emission_enabled = true
emission = Color(0.9, 0.3, 0.1, 1)
emission_energy_multiplier = 0.4

[sub_resource type="StandardMaterial3D" id="portal_disc_mat_volcanic"]
albedo_color = Color(0.9, 0.3, 0.1, 0.3)
transparency = 1
emission_enabled = true
emission = Color(0.9, 0.3, 0.1, 1)
emission_energy_multiplier = 1.5

[sub_resource type="StandardMaterial3D" id="portal_mat_frozen"]
albedo_color = Color(0.35, 0.56, 0.665, 1)
emission_enabled = true
emission = Color(0.5, 0.8, 0.95, 1)
emission_energy_multiplier = 0.4

[sub_resource type="StandardMaterial3D" id="portal_disc_mat_frozen"]
albedo_color = Color(0.5, 0.8, 0.95, 0.3)
transparency = 1
emission_enabled = true
emission = Color(0.5, 0.8, 0.95, 1)
emission_energy_multiplier = 1.5

; --- Calendar board meshes ---
[sub_resource type="BoxMesh" id="calendar_board_mesh"]
size = Vector3(1.2, 1.8, 0.15)

[sub_resource type="StandardMaterial3D" id="calendar_board_mat"]
albedo_color = Color(0.45, 0.3, 0.15, 1)

[sub_resource type="CylinderMesh" id="calendar_post_mesh"]
top_radius = 0.08
bottom_radius = 0.1
height = 2.0

[sub_resource type="StandardMaterial3D" id="calendar_post_mat"]
albedo_color = Color(0.35, 0.2, 0.1, 1)

; --- Fishing spot meshes ---
[sub_resource type="CylinderMesh" id="fishing_disc_mesh"]
top_radius = 3.0
bottom_radius = 3.0
height = 0.1

[sub_resource type="StandardMaterial3D" id="fishing_water_mat"]
albedo_color = Color(0.2, 0.4, 0.7, 0.5)
transparency = 1

; --- Containment wall collision ---
[sub_resource type="BoxShape3D" id="wall_ns_shape"]
size = Vector3(120, 10, 2)

[sub_resource type="BoxShape3D" id="wall_ew_shape"]
size = Vector3(2, 10, 180)

; ============================================================
; SCENE TREE
; ============================================================

[node name="GameWorld" type="Node3D"]
script = ExtResource("1")

[node name="SeasonManager" type="Node" parent="."]
script = ExtResource("2")

[node name="EncounterManager" type="Node" parent="."]
script = ExtResource("3")

[node name="BattleManager" type="Node" parent="."]
script = ExtResource("4")

[node name="CraftingSystem" type="Node" parent="."]
script = ExtResource("5")

; ==================== ENVIRONMENT ====================
[node name="Environment" type="Node3D" parent="."]

[node name="DirectionalLight3D" type="DirectionalLight3D" parent="Environment"]
transform = Transform3D(0.866, -0.354, 0.354, 0, 0.707, 0.707, -0.5, -0.612, 0.612, 0, 15, 10)
shadow_enabled = true

; --- Base ground (300x300 flat plane) ---
[node name="Ground" type="StaticBody3D" parent="Environment"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -0.1, 0)

[node name="GroundMesh" type="MeshInstance3D" parent="Environment/Ground"]
mesh = SubResource("ground_mesh")
material_override = SubResource("ground_mat")

[node name="GroundCollision" type="CollisionShape3D" parent="Environment/Ground"]
shape = SubResource("ground_shape")

; --- District ground overlays (colored zones at y=0.02) ---
[node name="GroundOverlays" type="Node3D" parent="Environment"]

[node name="TownSquareGround" type="MeshInstance3D" parent="Environment/GroundOverlays"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.02, 8)
mesh = SubResource("zone_town_mesh")
material_override = SubResource("zone_town_mat")

[node name="WharfWalkGround" type="MeshInstance3D" parent="Environment/GroundOverlays"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -28, 0.02, -4)
mesh = SubResource("zone_wharf_mesh")
material_override = SubResource("zone_wharf_mat")

[node name="MarketRowGround" type="MeshInstance3D" parent="Environment/GroundOverlays"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 22, 0.02, 8)
mesh = SubResource("zone_market_mesh")
material_override = SubResource("zone_market_mat")

[node name="HarborHeightsGround" type="MeshInstance3D" parent="Environment/GroundOverlays"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 8, 4.02, 42)
mesh = SubResource("zone_harbor_mesh")
material_override = SubResource("zone_harbor_mat")

[node name="FarmZoneGround" type="MeshInstance3D" parent="Environment/GroundOverlays"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 37, 0.02, 0)
mesh = SubResource("zone_farm_mesh")
material_override = SubResource("zone_farm_mat")

[node name="WildernessGround" type="MeshInstance3D" parent="Environment/GroundOverlays"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.02, -48)
mesh = SubResource("zone_wild_mesh")
material_override = SubResource("zone_wild_mat")

; --- Path strips (y=0.05, width 4) ---
[node name="Paths" type="Node3D" parent="Environment"]

; Spawn south to Wilderness entry: (0, 0.05, -3) down to (0, 0.05, -18)
[node name="PathSpawnSouth" type="MeshInstance3D" parent="Environment/Paths"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.05, -6)
mesh = SubResource("path_spawn_south_mesh")
material_override = SubResource("path_mat")

; Town Square to Wharf Walk: along z=-1, x=-14 to x=-15 (bridge gap)
[node name="PathToWharf" type="MeshInstance3D" parent="Environment/Paths"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -21, 0.05, -1)
mesh = SubResource("path_to_wharf_mesh")
material_override = SubResource("path_mat")

; Town Square to Market Row: along z=8, x=14 to x=14 (bridge gap)
[node name="PathToMarket" type="MeshInstance3D" parent="Environment/Paths"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 21, 0.05, 8)
mesh = SubResource("path_to_market_mesh")
material_override = SubResource("path_mat")

; Market Row to Farm Zone: from (30, 0.05, 2) to (28, 0.05, 0)
[node name="PathToFarm" type="MeshInstance3D" parent="Environment/Paths"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 34, 0.05, 2)
mesh = SubResource("path_to_farm_mesh")
material_override = SubResource("path_mat")

; Town Square north to Harbor Heights ramp base
[node name="PathToHarbor" type="MeshInstance3D" parent="Environment/Paths"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 4, 0.05, 22)
mesh = SubResource("path_to_harbor_mesh")
material_override = SubResource("path_mat")

; --- Path meshes (inline sub-resources via mesh overrides) ---

; --- Harbor Heights elevated platform (StaticBody3D at y=4) ---
[node name="HarborPlatform" type="StaticBody3D" parent="Environment"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 8, 3.85, 42)

[node name="PlatformCollision" type="CollisionShape3D" parent="Environment/HarborPlatform"]
shape = SubResource("zone_harbor_col_shape")

; --- Harbor Heights walkable ramp (y=0 to y=4, z=20 to z=23) ---
; Ramp center at (4, 2, 28), rotated around X to slope from y=0 at z=14 to y=4 at z=42
; angle = atan(4/28) ≈ 8.13 deg, cos=0.99, sin=0.142
[node name="HarborRamp" type="StaticBody3D" parent="Environment"]
transform = Transform3D(1, 0, 0, 0, 0.99, 0.142, 0, -0.142, 0.99, 4, 2, 28)

[node name="RampMesh" type="MeshInstance3D" parent="Environment/HarborRamp"]
mesh = SubResource("ramp_mesh")
material_override = SubResource("ramp_mat")

[node name="RampCollision" type="CollisionShape3D" parent="Environment/HarborRamp"]
shape = SubResource("ramp_col_shape")

; --- Containment walls (invisible) ---
[node name="Containment" type="Node3D" parent="Environment"]

[node name="WallNorth" type="StaticBody3D" parent="Environment/Containment"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 5, 65)

[node name="WallNorthCol" type="CollisionShape3D" parent="Environment/Containment/WallNorth"]
shape = SubResource("wall_ns_shape")

[node name="WallSouth" type="StaticBody3D" parent="Environment/Containment"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 5, -90)

[node name="WallSouthCol" type="CollisionShape3D" parent="Environment/Containment/WallSouth"]
shape = SubResource("wall_ns_shape")

[node name="WallWest" type="StaticBody3D" parent="Environment/Containment"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -50, 5, 0)

[node name="WallWestCol" type="CollisionShape3D" parent="Environment/Containment/WallWest"]
shape = SubResource("wall_ew_shape")

[node name="WallEast" type="StaticBody3D" parent="Environment/Containment"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 60, 5, 0)

[node name="WallEastCol" type="CollisionShape3D" parent="Environment/Containment/WallEast"]
shape = SubResource("wall_ew_shape")

; ==================== PLAYERS ====================
[node name="Players" type="Node3D" parent="."]

[node name="MultiplayerSpawner" type="MultiplayerSpawner" parent="Players"]
_spawnable_scenes = PackedStringArray("res://scenes/player/player.tscn")
spawn_path = NodePath("..")

; ==================== ZONES ====================
[node name="Zones" type="Node3D" parent="."]

; === RESTAURANT ZONE (hub area around spawn) ===
[node name="RestaurantZone" type="Node3D" parent="Zones"]

[node name="Building" type="StaticBody3D" parent="Zones/RestaurantZone"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 2, -2)

[node name="BuildingCollision" type="CollisionShape3D" parent="Zones/RestaurantZone/Building"]
shape = SubResource("building_shape")

[node name="CraftingTable" type="StaticBody3D" parent="Zones/RestaurantZone"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 3, 0.5, 1)

[node name="InteractArea" type="Area3D" parent="Zones/RestaurantZone/CraftingTable"]
script = ExtResource("12")
station_type = "kitchen"

[node name="InteractShape" type="CollisionShape3D" parent="Zones/RestaurantZone/CraftingTable/InteractArea"]
shape = SubResource("table_interact_shape")

[node name="StationLabel" type="Label3D" parent="Zones/RestaurantZone/CraftingTable"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1.8, 0)
text = "Kitchen"
font_size = 48
outline_size = 8
modulate = Color(1, 0.8, 0.3, 1)

; === PANTRY (creature storage station) ===
[node name="Pantry" type="StaticBody3D" parent="Zones/RestaurantZone"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -3, 0.9, -1)

[node name="InteractArea" type="Area3D" parent="Zones/RestaurantZone/Pantry"]
script = ExtResource("14")

[node name="InteractShape" type="CollisionShape3D" parent="Zones/RestaurantZone/Pantry/InteractArea"]
shape = SubResource("storage_interact_shape")

[node name="StationLabel" type="Label3D" parent="Zones/RestaurantZone/Pantry"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1.8, 0)
text = "Pantry"
font_size = 48
outline_size = 8
modulate = Color(0.5, 0.7, 0.9, 1)

[node name="SpawnPoint" type="Marker3D" parent="Zones/RestaurantZone"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 3)

; === FARM ZONE (25, 0, 0) ===
[node name="FarmZone" type="Node3D" parent="Zones"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 25, 0, 0)

[node name="FarmManager" type="Node3D" parent="Zones/FarmZone"]
script = ExtResource("6")

[node name="WaterSource" type="StaticBody3D" parent="Zones/FarmZone"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 6, 0.4, 6)

[node name="WaterArea" type="Area3D" parent="Zones/FarmZone/WaterSource" groups=["water_source"]]

[node name="WaterShape" type="CollisionShape3D" parent="Zones/FarmZone/WaterSource/WaterArea"]
shape = SubResource("water_interact_shape")

; === WORKBENCH (near spawn) ===
[node name="Workbench" type="StaticBody3D" parent="Zones/RestaurantZone"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -5, 0.6, 5)

[node name="InteractArea" type="Area3D" parent="Zones/RestaurantZone/Workbench"]
script = ExtResource("12")
station_type = "workbench"

[node name="InteractShape" type="CollisionShape3D" parent="Zones/RestaurantZone/Workbench/InteractArea"]
shape = SubResource("station_interact_shape")

[node name="StationLabel" type="Label3D" parent="Zones/RestaurantZone/Workbench"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1.8, 0)
text = "Workbench"
font_size = 48
outline_size = 8
modulate = Color(0.8, 0.5, 0.2, 1)

; === WILD ZONE ===
[node name="WildZone" type="Node3D" parent="Zones"]

[node name="HerbGarden" type="Area3D" parent="Zones/WildZone"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -12, 0, -15)
script = ExtResource("7")
encounter_table_id = "herb_garden"
grass_color = Color(0.2, 0.6, 0.2, 0.7)

[node name="GrassShape" type="CollisionShape3D" parent="Zones/WildZone/HerbGarden"]
shape = SubResource("grass_area_shape")

[node name="FlameKitchen" type="Area3D" parent="Zones/WildZone"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 12, 0, -15)
script = ExtResource("7")
encounter_table_id = "flame_kitchen"
grass_color = Color(0.6, 0.3, 0.2, 0.7)

[node name="GrassShape" type="CollisionShape3D" parent="Zones/WildZone/FlameKitchen"]
shape = SubResource("grass_area_shape")

[node name="FrostPantry" type="Area3D" parent="Zones/WildZone"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -18, 0, -35)
script = ExtResource("7")
encounter_table_id = "frost_pantry"
grass_color = Color(0.3, 0.4, 0.7, 0.7)

[node name="GrassShape" type="CollisionShape3D" parent="Zones/WildZone/FrostPantry"]
shape = SubResource("grass_area_shape")

[node name="HarvestField" type="Area3D" parent="Zones/WildZone"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 18, 0, -35)
script = ExtResource("7")
encounter_table_id = "harvest_field"
grass_color = Color(0.6, 0.55, 0.2, 0.7)

[node name="GrassShape" type="CollisionShape3D" parent="Zones/WildZone/HarvestField"]
shape = SubResource("grass_area_shape")

[node name="SourSprings" type="Area3D" parent="Zones/WildZone"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 18, 0, -48)
script = ExtResource("7")
encounter_table_id = "sour_springs"
grass_color = Color(0.7, 0.8, 0.2, 0.7)

[node name="GrassShape" type="CollisionShape3D" parent="Zones/WildZone/SourSprings"]
shape = SubResource("grass_area_shape")

[node name="FusionKitchen" type="Area3D" parent="Zones/WildZone"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -18, 0, -48)
script = ExtResource("7")
encounter_table_id = "fusion_kitchen"
grass_color = Color(0.6, 0.3, 0.6, 0.7)

[node name="GrassShape" type="CollisionShape3D" parent="Zones/WildZone/FusionKitchen"]
shape = SubResource("grass_area_shape")

[node name="FermentedHollow" type="Area3D" parent="Zones/WildZone"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -25, 0, -20)
script = ExtResource("7")
encounter_table_id = "fermented_hollow"
grass_color = Color(0.4, 0.35, 0.2, 0.7)

[node name="GrassShape" type="CollisionShape3D" parent="Zones/WildZone/FermentedHollow"]
shape = SubResource("grass_area_shape")

[node name="BlackenedCrest" type="Area3D" parent="Zones/WildZone"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 25, 3, -20)
script = ExtResource("7")
encounter_table_id = "blackened_crest"
grass_color = Color(0.5, 0.2, 0.15, 0.7)

[node name="GrassShape" type="CollisionShape3D" parent="Zones/WildZone/BlackenedCrest"]
shape = SubResource("grass_area_shape")

[node name="BatteredBay" type="Area3D" parent="Zones/WildZone"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -20, 0, -30)
script = ExtResource("7")
encounter_table_id = "battered_bay"
grass_color = Color(0.3, 0.5, 0.7, 0.7)

[node name="GrassShape" type="CollisionShape3D" parent="Zones/WildZone/BatteredBay"]
shape = SubResource("grass_area_shape")

[node name="SaltedShipwreck" type="Area3D" parent="Zones/WildZone"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 20, 0, -30)
script = ExtResource("7")
encounter_table_id = "salted_shipwreck"
grass_color = Color(0.5, 0.55, 0.45, 0.7)

[node name="GrassShape" type="CollisionShape3D" parent="Zones/WildZone/SaltedShipwreck"]
shape = SubResource("grass_area_shape")

; === CAULDRON (0, 0, -55) ===
[node name="Cauldron" type="StaticBody3D" parent="Zones/WildZone"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.6, -55)

[node name="InteractArea" type="Area3D" parent="Zones/WildZone/Cauldron"]
script = ExtResource("12")
station_type = "cauldron"

[node name="InteractShape" type="CollisionShape3D" parent="Zones/WildZone/Cauldron/InteractArea"]
shape = SubResource("station_interact_shape")

[node name="StationLabel" type="Label3D" parent="Zones/WildZone/Cauldron"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1.8, 0)
text = "Cauldron"
font_size = 48
outline_size = 8
modulate = Color(0.6, 0.3, 0.8, 1)

; === RECIPE PICKUPS ===
[node name="RecipePickups" type="Node3D" parent="Zones/WildZone"]

[node name="PickupHerbGarden" type="Area3D" parent="Zones/WildZone/RecipePickups"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -16, 0, -15)
script = ExtResource("13")
scroll_id = "scroll_basil_sprite"
pickup_id = "pickup_herb_garden_1"

[node name="PickupShape" type="CollisionShape3D" parent="Zones/WildZone/RecipePickups/PickupHerbGarden"]
shape = SubResource("pickup_shape")

[node name="PickupFrostPantry" type="Area3D" parent="Zones/WildZone/RecipePickups"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -22, 0, -35)
script = ExtResource("13")
scroll_id = "scroll_frost_berry"
pickup_id = "pickup_frost_pantry_1"

[node name="PickupShape" type="CollisionShape3D" parent="Zones/WildZone/RecipePickups/PickupFrostPantry"]
shape = SubResource("pickup_shape")

[node name="PickupSourSprings" type="Area3D" parent="Zones/WildZone/RecipePickups"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 22, 0, -48)
script = ExtResource("13")
scroll_id = "scroll_lemon_imp"
pickup_id = "pickup_sour_springs_1"

[node name="PickupShape" type="CollisionShape3D" parent="Zones/WildZone/RecipePickups/PickupSourSprings"]
shape = SubResource("pickup_shape")

[node name="PickupFusionKitchen" type="Area3D" parent="Zones/WildZone/RecipePickups"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -22, 0, -48)
script = ExtResource("13")
scroll_id = "scroll_pickle_toad"
pickup_id = "pickup_fusion_kitchen_1"

[node name="PickupShape" type="CollisionShape3D" parent="Zones/WildZone/RecipePickups/PickupFusionKitchen"]
shape = SubResource("pickup_shape")

; === HARVESTABLES (pre-placed, visuals built by _build_visuals()) ===
[node name="Harvestables" type="Node3D" parent="Zones/WildZone"]

[node name="Tree_n8_n12" parent="Zones/WildZone/Harvestables" instance=ExtResource("31")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -8, 0, -12)
harvestable_type = "tree"
required_tool = "axe"
max_health = 3
respawn_time = 120.0
drops = [{"item_id": "wood", "min": 1, "max": 3, "weight": 1.0}, {"item_id": "herb_basil", "min": 1, "max": 1, "weight": 0.2}]

[node name="Tree_8_n12" parent="Zones/WildZone/Harvestables" instance=ExtResource("31")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 8, 0, -12)
harvestable_type = "tree"
required_tool = "axe"
max_health = 3
respawn_time = 120.0
drops = [{"item_id": "wood", "min": 1, "max": 3, "weight": 1.0}, {"item_id": "herb_basil", "min": 1, "max": 1, "weight": 0.2}]

[node name="Tree_n14_n32" parent="Zones/WildZone/Harvestables" instance=ExtResource("31")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -14, 0, -32)
harvestable_type = "tree"
required_tool = "axe"
max_health = 3
respawn_time = 120.0
drops = [{"item_id": "wood", "min": 1, "max": 3, "weight": 1.0}, {"item_id": "herb_basil", "min": 1, "max": 1, "weight": 0.2}]

[node name="Tree_14_n32" parent="Zones/WildZone/Harvestables" instance=ExtResource("31")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 14, 0, -32)
harvestable_type = "tree"
required_tool = "axe"
max_health = 3
respawn_time = 120.0
drops = [{"item_id": "wood", "min": 1, "max": 3, "weight": 1.0}, {"item_id": "herb_basil", "min": 1, "max": 1, "weight": 0.2}]

[node name="Tree_n14_n45" parent="Zones/WildZone/Harvestables" instance=ExtResource("31")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -14, 0, -45)
harvestable_type = "tree"
required_tool = "axe"
max_health = 3
respawn_time = 120.0
drops = [{"item_id": "wood", "min": 1, "max": 3, "weight": 1.0}, {"item_id": "herb_basil", "min": 1, "max": 1, "weight": 0.2}]

[node name="Tree_14_n45" parent="Zones/WildZone/Harvestables" instance=ExtResource("31")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 14, 0, -45)
harvestable_type = "tree"
required_tool = "axe"
max_health = 3
respawn_time = 120.0
drops = [{"item_id": "wood", "min": 1, "max": 3, "weight": 1.0}, {"item_id": "herb_basil", "min": 1, "max": 1, "weight": 0.2}]

[node name="Rock_n16_n18" parent="Zones/WildZone/Harvestables" instance=ExtResource("31")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -16, 0, -18)
harvestable_type = "rock"
required_tool = "axe"
max_health = 4
respawn_time = 150.0
drops = [{"item_id": "stone", "min": 1, "max": 2, "weight": 1.0}, {"item_id": "chili_powder", "min": 1, "max": 1, "weight": 0.1}]

[node name="Rock_16_n18" parent="Zones/WildZone/Harvestables" instance=ExtResource("31")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 16, 0, -18)
harvestable_type = "rock"
required_tool = "axe"
max_health = 4
respawn_time = 150.0
drops = [{"item_id": "stone", "min": 1, "max": 2, "weight": 1.0}, {"item_id": "chili_powder", "min": 1, "max": 1, "weight": 0.1}]

[node name="Rock_n12_n50" parent="Zones/WildZone/Harvestables" instance=ExtResource("31")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -12, 0, -50)
harvestable_type = "rock"
required_tool = "axe"
max_health = 4
respawn_time = 150.0
drops = [{"item_id": "stone", "min": 1, "max": 2, "weight": 1.0}, {"item_id": "chili_powder", "min": 1, "max": 1, "weight": 0.1}]

[node name="Rock_12_n50" parent="Zones/WildZone/Harvestables" instance=ExtResource("31")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 12, 0, -50)
harvestable_type = "rock"
required_tool = "axe"
max_health = 4
respawn_time = 150.0
drops = [{"item_id": "stone", "min": 1, "max": 2, "weight": 1.0}, {"item_id": "chili_powder", "min": 1, "max": 1, "weight": 0.1}]

[node name="Bush_n10_n14" parent="Zones/WildZone/Harvestables" instance=ExtResource("31")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -10, 0, -14)
harvestable_type = "bush"
required_tool = ""
max_health = 1
respawn_time = 90.0
drops = [{"item_id": "berry", "min": 1, "max": 2, "weight": 1.0}]

[node name="Bush_10_n14" parent="Zones/WildZone/Harvestables" instance=ExtResource("31")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 10, 0, -14)
harvestable_type = "bush"
required_tool = ""
max_health = 1
respawn_time = 90.0
drops = [{"item_id": "berry", "min": 1, "max": 2, "weight": 1.0}]

[node name="Bush_n16_n38" parent="Zones/WildZone/Harvestables" instance=ExtResource("31")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -16, 0, -38)
harvestable_type = "bush"
required_tool = ""
max_health = 1
respawn_time = 90.0
drops = [{"item_id": "berry", "min": 1, "max": 2, "weight": 1.0}]

[node name="Bush_16_n38" parent="Zones/WildZone/Harvestables" instance=ExtResource("31")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 16, 0, -38)
harvestable_type = "bush"
required_tool = ""
max_health = 1
respawn_time = 90.0
drops = [{"item_id": "berry", "min": 1, "max": 2, "weight": 1.0}]

; === DIG SPOTS ===
[node name="DigSpots" type="Node3D" parent="Zones/WildZone"]

[node name="DigSpot_herb_1" type="Area3D" parent="Zones/WildZone/DigSpots"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -14, 0, -13)
script = ExtResource("32")
spot_id = "herb_1"
loot_table = [{"item_id": "broth", "weight": 0.6, "min": 1, "max": 1}, {"item_id": "herb_basil", "weight": 0.4, "min": 1, "max": 2}]

[node name="DigSpot_herb_2" type="Area3D" parent="Zones/WildZone/DigSpots"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -10, 0, -17)
script = ExtResource("32")
spot_id = "herb_2"
loot_table = [{"item_id": "broth", "weight": 0.5, "min": 1, "max": 1}, {"item_id": "herb_basil", "weight": 0.5, "min": 1, "max": 2}]

[node name="DigSpot_flame_1" type="Area3D" parent="Zones/WildZone/DigSpots"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 14, 0, -13)
script = ExtResource("32")
spot_id = "flame_1"
loot_table = [{"item_id": "chili_powder", "weight": 0.5, "min": 1, "max": 1}, {"item_id": "chili_pepper", "weight": 0.5, "min": 1, "max": 2}]

[node name="DigSpot_flame_2" type="Area3D" parent="Zones/WildZone/DigSpots"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 10, 0, -17)
script = ExtResource("32")
spot_id = "flame_2"
loot_table = [{"item_id": "chili_powder", "weight": 0.6, "min": 1, "max": 1}, {"item_id": "chili_pepper", "weight": 0.4, "min": 1, "max": 1}]

[node name="DigSpot_frost_1" type="Area3D" parent="Zones/WildZone/DigSpots"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -20, 0, -33)
script = ExtResource("32")
spot_id = "frost_1"
loot_table = [{"item_id": "mint", "weight": 0.6, "min": 1, "max": 2}]

[node name="DigSpot_frost_2" type="Area3D" parent="Zones/WildZone/DigSpots"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -16, 0, -37)
script = ExtResource("32")
spot_id = "frost_2"
loot_table = [{"item_id": "mint", "weight": 0.5, "min": 1, "max": 1}]

[node name="DigSpot_harvest_1" type="Area3D" parent="Zones/WildZone/DigSpots"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 20, 0, -33)
script = ExtResource("32")
spot_id = "harvest_1"
loot_table = [{"item_id": "wheat", "weight": 0.6, "min": 1, "max": 2}, {"item_id": "flour", "weight": 0.3, "min": 1, "max": 1}]

[node name="DigSpot_harvest_2" type="Area3D" parent="Zones/WildZone/DigSpots"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 16, 0, -37)
script = ExtResource("32")
spot_id = "harvest_2"
loot_table = [{"item_id": "wheat", "weight": 0.5, "min": 1, "max": 2}, {"item_id": "flour", "weight": 0.4, "min": 1, "max": 1}]

[node name="DigSpot_sour_1" type="Area3D" parent="Zones/WildZone/DigSpots"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 20, 0, -46)
script = ExtResource("32")
spot_id = "sour_1"
loot_table = [{"item_id": "mushroom", "weight": 0.5, "min": 1, "max": 2}]

[node name="DigSpot_fusion_1" type="Area3D" parent="Zones/WildZone/DigSpots"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -20, 0, -46)
script = ExtResource("32")
spot_id = "fusion_1"
loot_table = [{"item_id": "sugar", "weight": 0.4, "min": 1, "max": 1}, {"item_id": "soy_sauce", "weight": 0.3, "min": 1, "max": 1}]

; === FISHING SPOTS ===
[node name="FishingSpots" type="Node3D" parent="Zones"]

[node name="FishingSpot_pond" type="Node3D" parent="Zones/FishingSpots" groups=["fishing_spot"]]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -20, 0, -6)
metadata/fishing_table_id = "pond"

[node name="WaterDisc" type="MeshInstance3D" parent="Zones/FishingSpots/FishingSpot_pond"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.05, 0)
mesh = SubResource("fishing_disc_mesh")
material_override = SubResource("fishing_water_mat")

[node name="SpotLabel" type="Label3D" parent="Zones/FishingSpots/FishingSpot_pond"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 2.5, 0)
text = "Cove Pond - Fishing Spot"
font_size = 28
outline_size = 6
modulate = Color(0.6, 0.75, 0.9, 1)
billboard = 1

[node name="HintLabel" type="Label3D" parent="Zones/FishingSpots/FishingSpot_pond"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 2.0, 0)
text = "Equip Rod + Press E"
font_size = 20
outline_size = 4
modulate = Color(0.8, 0.8, 0.8, 0.8)
billboard = 1

[node name="FishingSpot_river" type="Node3D" parent="Zones/FishingSpots" groups=["fishing_spot"]]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -24, 0, -10)
metadata/fishing_table_id = "river"

[node name="WaterDisc" type="MeshInstance3D" parent="Zones/FishingSpots/FishingSpot_river"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.05, 0)
mesh = SubResource("fishing_disc_mesh")
material_override = SubResource("fishing_water_mat")

[node name="SpotLabel" type="Label3D" parent="Zones/FishingSpots/FishingSpot_river"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 2.5, 0)
text = "Wharf Pier - Fishing Spot"
font_size = 28
outline_size = 6
modulate = Color(0.6, 0.75, 0.9, 1)
billboard = 1

[node name="HintLabel" type="Label3D" parent="Zones/FishingSpots/FishingSpot_river"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 2.0, 0)
text = "Equip Rod + Press E"
font_size = 20
outline_size = 4
modulate = Color(0.8, 0.8, 0.8, 0.8)
billboard = 1

[node name="FishingSpot_ocean" type="Node3D" parent="Zones/FishingSpots" groups=["fishing_spot"]]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -32, 0, -2)
metadata/fishing_table_id = "ocean"

[node name="WaterDisc" type="MeshInstance3D" parent="Zones/FishingSpots/FishingSpot_ocean"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.05, 0)
mesh = SubResource("fishing_disc_mesh")
material_override = SubResource("fishing_water_mat")

[node name="SpotLabel" type="Label3D" parent="Zones/FishingSpots/FishingSpot_ocean"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 2.5, 0)
text = "Open Ocean - Fishing Spot"
font_size = 28
outline_size = 6
modulate = Color(0.6, 0.75, 0.9, 1)
billboard = 1

[node name="HintLabel" type="Label3D" parent="Zones/FishingSpots/FishingSpot_ocean"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 2.0, 0)
text = "Equip Rod + Press E"
font_size = 20
outline_size = 4
modulate = Color(0.8, 0.8, 0.8, 0.8)
billboard = 1

; === PORTAL VISUALS (static archways — interaction Area3D still spawned at runtime) ===
[node name="Portals" type="Node3D" parent="Zones/WildZone"]

; --- The Wilds portal ---
[node name="Portal_default" type="Node3D" parent="Zones/WildZone/Portals"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -8, 0, -25)

[node name="PillarL" type="MeshInstance3D" parent="Zones/WildZone/Portals/Portal_default"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -2, 2.5, 0)
mesh = SubResource("portal_pillar_mesh")
material_override = SubResource("portal_mat_default")

[node name="PillarR" type="MeshInstance3D" parent="Zones/WildZone/Portals/Portal_default"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 2, 2.5, 0)
mesh = SubResource("portal_pillar_mesh")
material_override = SubResource("portal_mat_default")

[node name="Lintel" type="MeshInstance3D" parent="Zones/WildZone/Portals/Portal_default"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 5.4, 0)
mesh = SubResource("portal_lintel_mesh")
material_override = SubResource("portal_mat_default")

[node name="Disc" type="MeshInstance3D" parent="Zones/WildZone/Portals/Portal_default"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.05, 0)
mesh = SubResource("portal_disc_mesh")
material_override = SubResource("portal_disc_mat_default")

[node name="Light" type="OmniLight3D" parent="Zones/WildZone/Portals/Portal_default"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 3, 0)
light_color = Color(0.6, 0.2, 0.8, 1)
light_energy = 1.5
omni_range = 6.0

[node name="SignLabel" type="Label3D" parent="Zones/WildZone/Portals/Portal_default"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 6.5, 0)
text = "The Wilds"
font_size = 48
outline_size = 10
modulate = Color(0.6, 0.2, 0.8, 1)
billboard = 1

[node name="HintLabel" type="Label3D" parent="Zones/WildZone/Portals/Portal_default"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 2.5, 0)
text = "Press E to Enter"
font_size = 24
outline_size = 6
modulate = Color(0.8, 0.8, 0.8, 0.8)
billboard = 1

; --- Coastal Wreckage portal ---
[node name="Portal_coastal" type="Node3D" parent="Zones/WildZone/Portals"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -33, 0, -12)

[node name="PillarL" type="MeshInstance3D" parent="Zones/WildZone/Portals/Portal_coastal"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -2, 2.5, 0)
mesh = SubResource("portal_pillar_mesh")
material_override = SubResource("portal_mat_coastal")

[node name="PillarR" type="MeshInstance3D" parent="Zones/WildZone/Portals/Portal_coastal"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 2, 2.5, 0)
mesh = SubResource("portal_pillar_mesh")
material_override = SubResource("portal_mat_coastal")

[node name="Lintel" type="MeshInstance3D" parent="Zones/WildZone/Portals/Portal_coastal"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 5.4, 0)
mesh = SubResource("portal_lintel_mesh")
material_override = SubResource("portal_mat_coastal")

[node name="Disc" type="MeshInstance3D" parent="Zones/WildZone/Portals/Portal_coastal"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.05, 0)
mesh = SubResource("portal_disc_mesh")
material_override = SubResource("portal_disc_mat_coastal")

[node name="Light" type="OmniLight3D" parent="Zones/WildZone/Portals/Portal_coastal"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 3, 0)
light_color = Color(0.2, 0.6, 0.8, 1)
light_energy = 1.5
omni_range = 6.0

[node name="SignLabel" type="Label3D" parent="Zones/WildZone/Portals/Portal_coastal"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 6.5, 0)
text = "Coastal Wreckage"
font_size = 48
outline_size = 10
modulate = Color(0.2, 0.6, 0.8, 1)
billboard = 1

[node name="HintLabel" type="Label3D" parent="Zones/WildZone/Portals/Portal_coastal"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 2.5, 0)
text = "Press E to Enter"
font_size = 24
outline_size = 6
modulate = Color(0.8, 0.8, 0.8, 0.8)
billboard = 1

; --- Fungal Hollow portal ---
[node name="Portal_fungal" type="Node3D" parent="Zones/WildZone/Portals"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 8, 0, -68)

[node name="PillarL" type="MeshInstance3D" parent="Zones/WildZone/Portals/Portal_fungal"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -2, 2.5, 0)
mesh = SubResource("portal_pillar_mesh")
material_override = SubResource("portal_mat_fungal")

[node name="PillarR" type="MeshInstance3D" parent="Zones/WildZone/Portals/Portal_fungal"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 2, 2.5, 0)
mesh = SubResource("portal_pillar_mesh")
material_override = SubResource("portal_mat_fungal")

[node name="Lintel" type="MeshInstance3D" parent="Zones/WildZone/Portals/Portal_fungal"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 5.4, 0)
mesh = SubResource("portal_lintel_mesh")
material_override = SubResource("portal_mat_fungal")

[node name="Disc" type="MeshInstance3D" parent="Zones/WildZone/Portals/Portal_fungal"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.05, 0)
mesh = SubResource("portal_disc_mesh")
material_override = SubResource("portal_disc_mat_fungal")

[node name="Light" type="OmniLight3D" parent="Zones/WildZone/Portals/Portal_fungal"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 3, 0)
light_color = Color(0.4, 0.2, 0.6, 1)
light_energy = 1.5
omni_range = 6.0

[node name="SignLabel" type="Label3D" parent="Zones/WildZone/Portals/Portal_fungal"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 6.5, 0)
text = "Fungal Hollow"
font_size = 48
outline_size = 10
modulate = Color(0.4, 0.2, 0.6, 1)
billboard = 1

[node name="HintLabel" type="Label3D" parent="Zones/WildZone/Portals/Portal_fungal"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 2.5, 0)
text = "Press E to Enter"
font_size = 24
outline_size = 6
modulate = Color(0.8, 0.8, 0.8, 0.8)
billboard = 1

; --- Volcanic Crest portal ---
[node name="Portal_volcanic" type="Node3D" parent="Zones/WildZone/Portals"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 45, 0, -12)

[node name="PillarL" type="MeshInstance3D" parent="Zones/WildZone/Portals/Portal_volcanic"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -2, 2.5, 0)
mesh = SubResource("portal_pillar_mesh")
material_override = SubResource("portal_mat_volcanic")

[node name="PillarR" type="MeshInstance3D" parent="Zones/WildZone/Portals/Portal_volcanic"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 2, 2.5, 0)
mesh = SubResource("portal_pillar_mesh")
material_override = SubResource("portal_mat_volcanic")

[node name="Lintel" type="MeshInstance3D" parent="Zones/WildZone/Portals/Portal_volcanic"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 5.4, 0)
mesh = SubResource("portal_lintel_mesh")
material_override = SubResource("portal_mat_volcanic")

[node name="Disc" type="MeshInstance3D" parent="Zones/WildZone/Portals/Portal_volcanic"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.05, 0)
mesh = SubResource("portal_disc_mesh")
material_override = SubResource("portal_disc_mat_volcanic")

[node name="Light" type="OmniLight3D" parent="Zones/WildZone/Portals/Portal_volcanic"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 3, 0)
light_color = Color(0.9, 0.3, 0.1, 1)
light_energy = 1.5
omni_range = 6.0

[node name="SignLabel" type="Label3D" parent="Zones/WildZone/Portals/Portal_volcanic"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 6.5, 0)
text = "Volcanic Crest"
font_size = 48
outline_size = 10
modulate = Color(0.9, 0.3, 0.1, 1)
billboard = 1

[node name="HintLabel" type="Label3D" parent="Zones/WildZone/Portals/Portal_volcanic"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 2.5, 0)
text = "Press E to Enter"
font_size = 24
outline_size = 6
modulate = Color(0.8, 0.8, 0.8, 0.8)
billboard = 1

; --- Frozen Pantry portal ---
[node name="Portal_frozen" type="Node3D" parent="Zones/WildZone/Portals"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 15, 0, 38)

[node name="PillarL" type="MeshInstance3D" parent="Zones/WildZone/Portals/Portal_frozen"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -2, 2.5, 0)
mesh = SubResource("portal_pillar_mesh")
material_override = SubResource("portal_mat_frozen")

[node name="PillarR" type="MeshInstance3D" parent="Zones/WildZone/Portals/Portal_frozen"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 2, 2.5, 0)
mesh = SubResource("portal_pillar_mesh")
material_override = SubResource("portal_mat_frozen")

[node name="Lintel" type="MeshInstance3D" parent="Zones/WildZone/Portals/Portal_frozen"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 5.4, 0)
mesh = SubResource("portal_lintel_mesh")
material_override = SubResource("portal_mat_frozen")

[node name="Disc" type="MeshInstance3D" parent="Zones/WildZone/Portals/Portal_frozen"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.05, 0)
mesh = SubResource("portal_disc_mesh")
material_override = SubResource("portal_disc_mat_frozen")

[node name="Light" type="OmniLight3D" parent="Zones/WildZone/Portals/Portal_frozen"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 3, 0)
light_color = Color(0.5, 0.8, 0.95, 1)
light_energy = 1.5
omni_range = 6.0

[node name="SignLabel" type="Label3D" parent="Zones/WildZone/Portals/Portal_frozen"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 6.5, 0)
text = "Frozen Pantry"
font_size = 48
outline_size = 10
modulate = Color(0.5, 0.8, 0.95, 1)
billboard = 1

[node name="HintLabel" type="Label3D" parent="Zones/WildZone/Portals/Portal_frozen"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 2.5, 0)
text = "Press E to Enter"
font_size = 24
outline_size = 6
modulate = Color(0.8, 0.8, 0.8, 0.8)
billboard = 1

; === CALENDAR BOARD (pre-placed visuals, script creates interaction Area3D) ===
[node name="CalendarBoard" type="Area3D" parent="Zones/RestaurantZone"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 3, 1, 10)
script = ExtResource("33")

[node name="BoardMesh" type="MeshInstance3D" parent="Zones/RestaurantZone/CalendarBoard"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1.2, 0)
mesh = SubResource("calendar_board_mesh")
material_override = SubResource("calendar_board_mat")

[node name="PostMesh" type="MeshInstance3D" parent="Zones/RestaurantZone/CalendarBoard"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1.0, 0)
mesh = SubResource("calendar_post_mesh")
material_override = SubResource("calendar_post_mat")

[node name="BoardLabel" type="Label3D" parent="Zones/RestaurantZone/CalendarBoard"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 2.5, 0)
text = "Town Calendar"
font_size = 32
outline_size = 6
modulate = Color(0.8, 0.6, 0.3, 1)
billboard = 1

; === TRAINER NPCs ===
[node name="Trainers" type="Node3D" parent="Zones"]

[node name="SousChefPepper" type="Area3D" parent="Zones/Trainers"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -12, 0, -10)
script = ExtResource("9")
trainer_id = "sous_chef_pepper"

[node name="FarmerGreen" type="Area3D" parent="Zones/Trainers"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 12, 0, -10)
script = ExtResource("9")
trainer_id = "farmer_green"

[node name="ChefUmami" type="Area3D" parent="Zones/Trainers"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, -20)
script = ExtResource("9")
trainer_id = "chef_umami"
is_gatekeeper = true

[node name="PastryChefDulce" type="Area3D" parent="Zones/Trainers"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -18, 0, -28)
script = ExtResource("9")
trainer_id = "pastry_chef_dulce"

[node name="BrinemasterVlad" type="Area3D" parent="Zones/Trainers"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 18, 0, -28)
script = ExtResource("9")
trainer_id = "brinemaster_vlad"

[node name="HeadChefRoux" type="Area3D" parent="Zones/Trainers"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, -40)
script = ExtResource("9")
trainer_id = "head_chef_roux"
is_gatekeeper = true

[node name="GrandChefMichelin" type="Area3D" parent="Zones/Trainers"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -25, 0, -55)
script = ExtResource("9")
trainer_id = "grand_chef_michelin"

; === SHOP NPCs ===
[node name="Shops" type="Node3D" parent="Zones"]

[node name="GeneralStore" type="Area3D" parent="Zones/Shops"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 8, 0, 5)
script = ExtResource("17")
shop_id = "general_store"

[node name="BattleSupplies" type="Area3D" parent="Zones/Shops"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -8, 0, -15)
script = ExtResource("17")
shop_id = "battle_supplies"

[node name="RareGoods" type="Area3D" parent="Zones/Shops"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -20, 0, -45)
script = ExtResource("17")
shop_id = "rare_goods"

; === SOCIAL NPCs ===
[node name="SocialNPCs" type="Node3D" parent="Zones"]

[node name="HubertCrumb" type="Area3D" parent="Zones/SocialNPCs"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -3, 1, 8)
script = ExtResource("18")
npc_id = "npc_hubert"

[node name="OldSageMurphy" type="Area3D" parent="Zones/SocialNPCs"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 5, 4, 35)
script = ExtResource("18")
npc_id = "npc_murphy"

[node name="CaptainSalHaddock" type="Area3D" parent="Zones/SocialNPCs"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -8, 0, -3)
script = ExtResource("18")
npc_id = "npc_captain_sal"

[node name="PepperSantos" type="Area3D" parent="Zones/SocialNPCs"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 7, 1, 6)
script = ExtResource("18")
npc_id = "npc_pepper"

[node name="ProfessorQuill" type="Area3D" parent="Zones/SocialNPCs"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 18, 2, 8)
script = ExtResource("18")
npc_id = "npc_quill"

[node name="MayorRosemary" type="Area3D" parent="Zones/SocialNPCs"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 5, 1, 10)
script = ExtResource("18")
npc_id = "npc_mayor"

[node name="InnkeeperMabel" type="Area3D" parent="Zones/SocialNPCs"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -10, 0, -5)
script = ExtResource("18")
npc_id = "npc_innkeeper"

[node name="ClayBrennan" type="Area3D" parent="Zones/SocialNPCs"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -5, 1, 8)
script = ExtResource("18")
npc_id = "npc_potter"

[node name="ScarletWinters" type="Area3D" parent="Zones/SocialNPCs"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 15, 2, 5)
script = ExtResource("18")
npc_id = "npc_tailor"

[node name="IrisGreenthumb" type="Area3D" parent="Zones/SocialNPCs"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 20, 2, 10)
script = ExtResource("18")
npc_id = "npc_gardener"

[node name="DrHoney" type="Area3D" parent="Zones/SocialNPCs"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 22, 2, 3)
script = ExtResource("18")
npc_id = "npc_doctor"

[node name="HazelMapleton" type="Area3D" parent="Zones/SocialNPCs"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 8, 1, 5)
script = ExtResource("18")
npc_id = "npc_general_store"

[node name="ClementineSmith" type="Area3D" parent="Zones/SocialNPCs"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 2, 1, 4)
script = ExtResource("18")
npc_id = "npc_clementine"

[node name="RiverSong" type="Area3D" parent="Zones/SocialNPCs"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -12, 0, -8)
script = ExtResource("18")
npc_id = "npc_river"

[node name="AlexHartwell" type="Area3D" parent="Zones/SocialNPCs"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1, 6)
script = ExtResource("18")
npc_id = "npc_alex"

; === RESTAURANT ROW (south of spawn, z=5) ===
[node name="RestaurantRow" type="Node3D" parent="Zones"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 5)

[node name="SignLabel" type="Label3D" parent="Zones/RestaurantRow"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 5.5, 0.5)
text = "RESTAURANT ROW"
font_size = 96
outline_size = 16
modulate = Color(1, 0.9, 0.3, 1)
billboard = 1

[node name="SubSign" type="Label3D" parent="Zones/RestaurantRow"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 4.6, 0.5)
text = "▼ ENTER BELOW ▼"
font_size = 48
outline_size = 10
modulate = Color(1, 0.6, 0.2, 1)
billboard = 1

; ==================== MANAGERS ====================
[node name="RestaurantManager" type="Node" parent="."]
script = ExtResource("16")

[node name="SocialManager" type="Node" parent="."]
script = ExtResource("19")

[node name="LocationManager" type="Node" parent="."]
script = ExtResource("20")

[node name="QuestManager" type="Node" parent="."]
script = ExtResource("21")

[node name="FriendManager" type="Node" parent="."]
script = ExtResource("22")

[node name="WorldItemManager" type="Node" parent="."]
script = ExtResource("15")

[node name="WorldItems" type="Node3D" parent="."]

[node name="ExcursionManager" type="Node" parent="."]
script = ExtResource("23")

[node name="DayNightController" type="Node" parent="."]
script = ExtResource("24")

; ==================== DISTRICTS (gutted, empty Node3D) ====================
[node name="Districts" type="Node3D" parent="."]

[node name="TownSquare" parent="Districts" instance=ExtResource("25")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 6)

[node name="WharfWalk" parent="Districts" instance=ExtResource("26")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -28, 0, -4)

[node name="MarketRow" parent="Districts" instance=ExtResource("27")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 15, 0, 6)

[node name="HarborHeights" parent="Districts" instance=ExtResource("28")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 5, 0, 28)

[node name="FarmDecor" parent="Districts" instance=ExtResource("29")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 25, 0, 0)

[node name="Wilderness" parent="Districts" instance=ExtResource("30")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, -12)

; ==================== UI ====================
[node name="UI" type="Node" parent="."]

[node name="PvPChallengeUI" parent="UI" instance=ExtResource("10")]

[node name="TrainerDialogueUI" parent="UI" instance=ExtResource("11")]
